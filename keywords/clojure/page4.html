<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Keyword: clojure | LispCast</title>
    <meta name="description" content="A blog about the simple joys of functional programming.">
    <meta name="author" content="Eric Normand">

    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/styles.css" type="text/css">

    <link rel="alternate" type="application/rss+xml" title="LispCast" href="/feed" />

<!-- start Mixpanel --><script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
mixpanel.init("ffad2bd88d2cb690edbbba6cf30b2958");</script><!-- end Mixpanel -->
  </head>

  <body>
    <header class="banner">
      <h1 class="banner-logo">
        <a href="/">
          <img class="banner-logo-img"
               src="/img/Logo@2x.png"
               alt="LispCast" />
        </a>
      </h1>

      <div class="meta-data">
        <img class="bio-img"
             src="/img/eric_bio.jpg" />
        <a class="twitter-link"
           href="http://twitter.com/ericnormand">
          <i class="fa fa-twitter"></i>
        </a>
        <a class="github-link"
           href="https://github.com/ericnormand">
          <i class="fa fa-github"></i>
        </a>
        <a class="mail-link"
           href="mailto:eric@lispcast.com">
          <i class="fa fa-envelope"></i>
        </a>
        <a class="rss-link"
           href="/feed">
          <i class="fa fa-rss-square"></i>
        </a>
        <a class="rss-link"
           href="/archive.html">
          <i class="fa fa-list"></i>
        </a>
      </div>

    </header>

    <div class="main-container">


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-west-sean-johnson">
              Pre-West Prep: Sean Johnson
            </a>
          </h2>

          <div class="timestamp">
            April 06, 2015
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-west-prep.png" />
</div>
<h3 id="talk-pattern-matching-in-clojure-best-practicestalk">Talk: <a href="http://clojurewest.org/speakers#sjohnson">Pattern Matching in Clojure: Best Practices</a></h3>
<p><a href="http://clojurewest.org/speakers#sjohnson">Sean Johnson's talk</a> at <em>Clojure/West</em> is about pattern matching in Clojure.</p>
<h4 id="background">Background</h4>
<p>The built-in pattern matching in Clojure is not as powerful as in Haskell and Erlang. But, being a Lisp, it's easy to write a pattern matching macro. Which has been done, it's called <a href="https://github.com/clojure/core.match">core.match</a>, and it's great. This talk is an experience report from using pattern matching in Clojure. Check out <a href="https://vimeo.com/27860102">Pattern Matching &amp; Predicate Dispatch</a>, a talk by core.match's creator, David Nolen.</p>
<h3 id="about-sean-johnsontalk">About <a href="http://clojurewest.org/speakers#sjohnson">Sean Johnson</a></h3>
<p><a href="http://snootymonkey.com/">Homepage</a> - <a href="https://twitter.com/snootymonkey">Twitter</a> - <a href="https://github.com/belucid">GitHub</a></p>
<p><a href="http://clojurewest.org/speakers#sjohnson"><img src="http://www.lispcast.com/img/pre-west/sjohnson.jpg" /></a></p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-west">Pre-West Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>
</div>

<p style="font-size:0.8em">
<em> <a href="http://clojurewest.org/">Clojure/West</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/West or Cognitect. It is simply me (and helpers) curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-west-2015">Pre-West Prep 2015</a></li>
<li><a href="http://www.lispcast.com/pre-west-alan-dipert-micha-niskin">Pre-West Prep: Alan Dipert and Micha Niskin</a></li>
<li><a href="http://www.lispcast.com/pre-west-anthony-marcar">Pre-West Prep: Anthony Marcar</a></li>
<li><a href="http://www.lispcast.com/pre-west-boris-kourtoukov">Pre-West Prep: Boris Kourtoukov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-west-soren-macbeth">
              Pre-West Prep: Soren Macbeth
            </a>
          </h2>

          <div class="timestamp">
            April 06, 2015
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-west-prep.png" />
</div>
<h3 id="talk-data-science-on-clojuretalk">Talk: <a href="http://clojurewest.org/speakers#smacbeth">Data Science on Clojure</a></h3>
<p><a href="http://clojurewest.org/speakers#smacbeth">Soren Macbeth's talk</a> at <em>Clojure/West</em> is about data crunching in Clojure.</p>
<h4 id="background">Background</h4>
<p>Clojure's prowess in the world of data and distributed systems is pretty awesome. This talk is about two open source libraries for crunching lots of data in Clojure. One is called <a href="https://github.com/yieldbot/marceline">marceline</a>, the other is <a href="https://github.com/yieldbot/flambo">flambo</a>. Both are wrappers for distributed computation libraries. For background, you may want to watch a <a href="http://www.infoq.com/presentations/Storm-Distributed-and-Fault-tolerant-Real-time-Computation">talk by Nathan Marz on Storm</a>.</p>
<h3 id="about-soren-macbethtalk">About <a href="http://clojurewest.org/speakers#smacbeth">Soren Macbeth</a></h3>
<p><a href="http://dopeness.org/">Homepage</a> - <a href="https://twitter.com/sorenmacbeth">Twitter</a> - <a href="https://github.com/sorenmacbeth">GitHub</a></p>
<p><a href="http://clojurewest.org/speakers#smacbeth"><img src="http://www.lispcast.com/img/pre-west/smacbeth.png" /></a></p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-west">Pre-West Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>
</div>

<p style="font-size:0.8em">
<em> <a href="http://clojurewest.org/">Clojure/West</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/West or Cognitect. It is simply me (and helpers) curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-west-2015">Pre-West Prep 2015</a></li>
<li><a href="http://www.lispcast.com/pre-west-alan-dipert-micha-niskin">Pre-West Prep: Alan Dipert and Micha Niskin</a></li>
<li><a href="http://www.lispcast.com/pre-west-anthony-marcar">Pre-West Prep: Anthony Marcar</a></li>
<li><a href="http://www.lispcast.com/pre-west-boris-kourtoukov">Pre-West Prep: Boris Kourtoukov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-west-tom-faulhaber">
              Pre-West Prep: Tom Faulhaber
            </a>
          </h2>

          <div class="timestamp">
            April 06, 2015
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-west-prep.png" />
</div>
<h3 id="talk-creating-beautiful-spreadsheets-with-data-and-templatestalk">Talk: <a href="http://clojurewest.org/speakers#tfaulhaber">Creating Beautiful Spreadsheets with Data and Templates</a></h3>
<p><a href="http://clojurewest.org/speakers#tfaulhaber">Tom Faulhaber's talk</a> at <em>Clojure/West</em> is about generating Excel sheets in Clojure.</p>
<h4 id="background">Background</h4>
<p>People are using Clojure for some really interesting work. This one is about using Excel as an output format. It's richer by far than CSV, and it can let non-programmers explore data in a way no other tool can. Tom Faulhaber has created a library for filling in Excel templates with Clojure data. See <a href="http://www.infolace.com/blog/2015/02/10/generating-beautiful-excel-reports-with-templates/">his blog post</a> for more info.</p>
<h3 id="about-tom-faulhabertalk">About <a href="http://clojurewest.org/speakers#tfaulhaber">Tom Faulhaber</a></h3>
<p><a href="http://www.infolace.com/blog/">Homepage</a> - <a href="https://twitter.com/tomfaulhaber">Twitter</a> - <a href="https://github.com/tomfaulhaber">GitHub</a></p>
<p><a href="http://clojurewest.org/speakers#tfaulhaber"><img src="http://www.lispcast.com/img/pre-west/tfaulhaber.jpg" /></a></p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-west">Pre-West Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>
</div>

<p style="font-size:0.8em">
<em> <a href="http://clojurewest.org/">Clojure/West</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/West or Cognitect. It is simply me (and helpers) curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-west-2015">Pre-West Prep 2015</a></li>
<li><a href="http://www.lispcast.com/pre-west-alan-dipert-micha-niskin">Pre-West Prep: Alan Dipert and Micha Niskin</a></li>
<li><a href="http://www.lispcast.com/pre-west-anthony-marcar">Pre-West Prep: Anthony Marcar</a></li>
<li><a href="http://www.lispcast.com/pre-west-boris-kourtoukov">Pre-West Prep: Boris Kourtoukov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-west-tyler-tallman">
              Pre-West Prep: Tyler Tallman
            </a>
          </h2>

          <div class="timestamp">
            April 08, 2015
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-west-prep.png" />
</div>
<h3 id="talk-composable-healthcaretalk">Talk: <a href="http://clojurewest.org/speakers#ttallman">Composable Healthcare</a></h3>
<p><a href="http://clojurewest.org/speakers#ttallman">Tyler Tallman's talk</a> at <em>Clojure/West</em> is about how to model complex problems in Clojure.</p>
<h4 id="background">Background</h4>
<p>Medical care is incredibly complex, and is only getting worse. Most medical record software is like a basic CRUD app. It stores the information the doctor puts in and displays it when asked. But as the amount of information increases, something more needs to happen. How can the computer system support the doctor making ever more complex decisions? How can it support the host of medical professionals that provide care? And what role can Clojure play in that process?</p>
<p>I don't have any background information for this one. But I know Tyler personally and this is a fascinating story of rules engines, complex data formats, visualizations, and composable abstractions.</p>
<h3 id="about-tyler-tallmantalk">About <a href="http://clojurewest.org/speakers#ttallman">Tyler Tallman</a></h3>
<p><a href="https://github.com/dspiteself">GitHub</a> - <a href="https://twitter.com/dspiteself">Twitter</a></p>
<p><a href="http://clojurewest.org/speakers#ttallman"><img src="http://www.lispcast.com/img/pre-west/ttallman.jpg" /></a></p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-west">Pre-West Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>
</div>

<p style="font-size:0.8em">
<em> <a href="http://clojurewest.org/">Clojure/West</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/West or Cognitect. It is simply me (and helpers) curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-west-2015">Pre-West Prep 2015</a></li>
<li><a href="http://www.lispcast.com/pre-west-alan-dipert-micha-niskin">Pre-West Prep: Alan Dipert and Micha Niskin</a></li>
<li><a href="http://www.lispcast.com/pre-west-anthony-marcar">Pre-West Prep: Anthony Marcar</a></li>
<li><a href="http://www.lispcast.com/pre-west-boris-kourtoukov">Pre-West Prep: Boris Kourtoukov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/ring-1-3">
              Ring 1.3
            </a>
          </h2>

          <div class="timestamp">
            July 22, 2014
          </div>

          
<p>Summary: <em>Ring is great because it closely models the HTTP message format using native Clojure data structures. It strictly defines a message format that any software can use and rely on. With Ring 1.3, the specification has gotten even closer to the HTTP spec.</em></p>
<p>A couple of months ago, Ring 1.3 was released without much fanfare. It included a few improvements and updates, but in general, not much had changed.</p>
<p>One change, though, is very significant: the specification is <em>shorter</em>. It's simpler. Three keys were deprecated in the Ring request map (<code>:content-type</code>, <code>:content-length</code>, and <code>:character-encoding</code>). <strong>These keys were unnecessary because their values were in the headers</strong>, which are also in the Ring request. Equivalent utility functions have been added for pulling the data out of the headers.</p>
<p>Why is this important? While many libraries get more complex and overburdened, <strong>it is refreshing to see a library going in the correct direction of <em>shedding complexity</em></strong>. It does not significantly impact application development. Nor does it reduce the already low barrier to entry. Still, I welcome this kind of change.</p>
<p><strong>Ring is the central specification that ties most of the Clojure web ecosystem together.</strong> The spec <em>should</em> be minimal. <strong>And a mark of good software is that it models the problem very closely without unnecessary abstraction.</strong> Ring merely defines a common format (using Clojure data structures) that mirrors the text-based HTTP message format. That's why Ring has worked so well thus far and why it is appreciated in Clojure.</p>
<p>Because I was so happy about the change, I decided to update my <a href="http://www.lispcast.com/ring-spec-hang-on-wall">Ring Spec to Hang on the Wall PDF</a>. The newly deprecated keys are gone. It used to be two pages long. The Ring Request took up an entire page, and the Response took up about half of one. But now, with three keys removed and a little tweaking of the font sizes, <strong>everything fits on one page</strong>.</p>
<center> 
<a
    href="http://www.purelyfunctional.tv/web-dev-in-clojure#subscribe"><img
    src="http://www.purelyfunctional.tv/img/ring_spec_1_3.png"
    style="box-shadow: 2px 2px 5px #888888; max-width: 200px" /></a>
</center>

<p>One page in big, readable fonts, with just the information you need for quick reference. I like it. <strong>I'm printing one out right now to tack on the wall.</strong> You can <a href="http://www.purelyfunctional.tv/web-dev-in-clojure#subscribe">get a free copy</a> for yourself by getting on the PurelyFunctional.tv mailing list <a href="http://www.purelyfunctional.tv/web-dev-in-clojure#subscribe">here</a>.</p>
<div class="subscribe-form-wrapper">
  <form class="subscribe-form"
        action="https://lispcast.us4.list-manage.com/subscribe/post?u=a33b5228d1b5bf2e0c68a83f4&amp;id=d0f96276d9"
        method="POST"
        name="mc-embedded-subscribe-form"
        novalidate="true">
      <h3 class="subscribe-form-title">
        
Get a Free Ring Spec to hang on your wall
</h3>
    
<img class="subscribe-form-image"
         src="http://www.lispcast.com/img/ring_spec_1_3.png">
<div class="subscribe-form-text">
      <p class="subscribe-form-description">
        
Subscribe below to receive a free copy of a Ring Spec to hang on your wall. If you are programming in Ring (covered in the videos), you'll find it very useful as a reference. You'll also hear about exclusive previews and discounts of other video courses.
</p>
      
<input id="mce-EMAIL"
             class="email-field"
             type="email"
             value=""
             placeholder="Email"
             name="EMAIL"> <input type="hidden"
             name="group[18565][4]"
             value="1">
<div style="position: absolute; left: -5000px;">
        
<input type="text"
               name="b_a33b5228d1b5bf2e0c68a83f4_d0f96276d9">
</div>
      
<input class="subscribe-button"
             type="submit"
             value="Get it"
             name="subscribe">
<div class="field-text-text2">
        
No spam. Ever.
</div>
    </div>
  </form>
</div>



<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/cascading-separation-abstraction">Separation, Abstraction, and Cascading in CSS</a></li>
<li><a href="http://www.lispcast.com/clojure-web-security">Clojure Web Security</a></li>
<li><a href="http://www.lispcast.com/hiccup-tips">Hiccup Tips</a></li>
<li><a href="http://www.lispcast.com/json-serialization-api-clojure">JSON Serialization for APIs in Clojure</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/ring-spec-hang-on-wall">
              A Ring Spec to Hang on the Wall
            </a>
          </h2>

          <div class="timestamp">
            March 28, 2014
          </div>

          
<p>Summary: <em>The Ring SPEC is the core of the Clojure web ecosystem. The standard is small and <a href="http://www.purelyfunctional.tv/web-dev-in-clojure#subscribe">a reference</a> is handy.</em></p>
<p>If you program the web in Clojure, you probably use Ring. Even if you don't, your server is likely <a href="http://http-kit.org/">Ring compatible</a>.</p>
<p>Ring has a small SPEC. It's centered around defining the keys one can expect in the request and response maps. And the exact names for keywords are easy to forget.</p>
<p>I don't want to forget. I use Ring often enough that I want a quick reference. A while ago, I printed out a quick summary of the keys for the request and response maps and hung it on the wall behind my monitor. I refer to it frequently.</p>
<p>If you program the web in Clojure, you might appreciate this printout. If you're learning, it could be an invaluable reference. <a href="http://www.purelyfunctional.tv/web-dev-in-clojure#subscribe">Please download the PDF.</a></p>
<p>And if you like it, you might also like my <a href="http://www.purelyfunctional.tv/web-dev-in-clojure">Web Development in Clojure video series</a>.</p>
<div class="subscribe-form-wrapper">
  <form class="subscribe-form"
        action="https://lispcast.us4.list-manage.com/subscribe/post?u=a33b5228d1b5bf2e0c68a83f4&amp;id=d0f96276d9"
        method="POST"
        name="mc-embedded-subscribe-form"
        novalidate="true">
      <h3 class="subscribe-form-title">
        
Get a Free Ring Spec to hang on your wall
</h3>
    
<img class="subscribe-form-image"
         src="http://www.lispcast.com/img/ring_spec_1_3.png">
<div class="subscribe-form-text">
      <p class="subscribe-form-description">
        
Subscribe below to receive a free copy of a Ring Spec to hang on your wall. If you are programming in Ring (covered in the videos), you'll find it very useful as a reference. You'll also hear about exclusive previews and discounts of other video courses.
</p>
      
<input id="mce-EMAIL"
             class="email-field"
             type="email"
             value=""
             placeholder="Email"
             name="EMAIL"> <input type="hidden"
             name="group[18565][4]"
             value="1">
<div style="position: absolute; left: -5000px;">
        
<input type="text"
               name="b_a33b5228d1b5bf2e0c68a83f4_d0f96276d9">
</div>
      
<input class="subscribe-button"
             type="submit"
             value="Get it"
             name="subscribe">
<div class="field-text-text2">
        
No spam. Ever.
</div>
    </div>
  </form>
</div>



<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/cascading-separation-abstraction">Separation, Abstraction, and Cascading in CSS</a></li>
<li><a href="http://www.lispcast.com/clojure-web-security">Clojure Web Security</a></li>
<li><a href="http://www.lispcast.com/hiccup-tips">Hiccup Tips</a></li>
<li><a href="http://www.lispcast.com/json-serialization-api-clojure">JSON Serialization for APIs in Clojure</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/token-buckets-in-core-async">
              Token Buckets with core.async
            </a>
          </h2>

          <div class="timestamp">
            November 10, 2014
          </div>

          
<p>Summary: <em>Token Bucket is a simple algorithm for rate limiting a resource. It's easy to understand because you can reason about it in terms of real-world objects. core.async makes this algorithm very clear and easy.</em></p>
<div class="figure">
<img src="http://www.lispcast.com/img/token%20bucket.png" alt="Token + BucketImage credits: token and bucket." /><p class="caption">Token + Bucket<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup></p>
</div>
<p>You know you've got a good abstraction when you find lots of algorithms that are easy and clear to write using them. One algorithm that I really like because it's <strong>practical and simple</strong> is called the <a href="http://en.wikipedia.org/wiki/Token_bucket">Token Bucket</a>. It's used for <strong>rate limiting a resource</strong>. And it's very easy to write in core.async.</p>
<p>Let me digress a little. Here in the US, we have a complicated voting system. Not only do your presidential votes count only indirectly, but the counting is done with machines that vary from state to state. Some of those systems are so complicated. It's a little scary because it's hard to know how those machines work.</p>
<p>I mean, relatively hard. It's obviously possible to know, if you study enough. But <strong>compare it to papers in a box</strong>. I know there's all sorts of room for corruption in the papers in a box system. But it's understandable by children. Well, as long as they can count.</p>
<p>The token bucket is similarly simple. There's a bucket. You put tokens in it at a certain rate (for instance, once per hour). If you have a token, you can take an action (ride the subway, send a packet, read a file), then you lose the token (it's good for one ride). If you don't have a token, you can wait. <strong>Everything slows down to the rate of tokens falling into the bucket.</strong></p>
<p>It's so simple. It so easily <strong>corresponds to a real-world situation</strong> you can imagine. I love that type of algorithm.</p>
<h3 id="an-implementation">An implementation</h3>
<p>Let's build Token Bucket in core.async.</p>
<p>First, we need a bucket. For that, we'll use a core.async channel with a buffer. Let's just start with size 10.</p>
<pre><code>(def bucket (chan 10))</code></pre>
<p>Bucket is done. Now, we need something to <strong>add tokens to the bucket at a given rate</strong>.</p>
<pre><code>(go
  (while true
    (&gt;! bucket :token)
    (&lt;! (timeout 1000))))</code></pre>
<p>That will add one token to the bucket every second.</p>
<p>We can rate limit an existing channel by <strong>forcing it to take a token before values get through</strong>.</p>
<pre><code>(defn limit-rate [c]
  (let [out (chan)]
    (go
      (loop []
        (let [v (&lt;! c)]
          (if (nil? v) ;; c is closed
            (close! out)
            (do
              (&lt;! bucket) ;; wait for a token
              (&gt;! out v)
              (recur))))))
    out))</code></pre>
<h3 id="corner-cases">Corner cases</h3>
<p>Ok, it's not that simple. There are two corner cases.</p>
<ol style="list-style-type: decimal">
<li>What happens when nobody takes a token out of the bucket? Do you keep putting coins in?</li>
</ol>
<p>The answer is yes. In the next hour, there are two tokens, so two can come through. But then . . .</p>
<ol start="2" style="list-style-type: decimal">
<li>What do you do when the bucket gets really full and a whole bunch of people take tokens out at the same time?</li>
</ol>
<p>Well, you let them all through. One token, one ride. There's no other coordination. And that means it's really important to choose the size of your bucket.</p>
<p>The number of tokens your bucket can hold is called the <em>burstiness</em>. It's because when the bucket is full, you could get a rampage of people trying to get on the subway. How many people should be allowed through at that point? <strong>The burstiness is the maximum that should come through at a time.</strong></p>
<p>We have our two parameters: the <em>rate</em> and the <em>burstiness</em>. Let's incorporate all of that.</p>
<pre><code>(defn limit-rate [c r b]
  (let [bucket (chan b) ;; burstiness
        out (chan)]
    (go
      (while true
        (&gt;! bucket :token)
        (&lt;! (timeout (int (/ 1000 r)))))) ;; rate
    (go
      (loop []
        (let [v (&lt;! c)]
          (if (nil? v) ;; channel is closed
            (close! out)
            (do
              (&lt;! bucket) ;; wait for a token
              (&gt;! out v)
              (recur))))))
    out))</code></pre>
<p>The burstiness is taken care of in the size of the buffer. The buffer will fill up if no one takes a token. Since we're using blocking buffers, <strong>putting tokens into a full bucket will block</strong> until something takes a token--exactly as the algorithm describes.</p>
<p>Well, that's it. It's easy. And now <strong>we have a way to limit the rate of a channel</strong>. We can use it to limit the rates of other things, too, like a function call or access to a database. I use it to rate limit an API.</p>
<p>core.async makes this algorithm nice and easy to use. There's a library that does this for you in a very convenient package. It's called <a href="https://github.com/brunoV/throttler">Throttler</a>. Bruno Vecchi has done the work of making this work well as a library. If you'd like to learn core.async, I recommend my <a href="http://www.purelyfunctional.tv/core-async">LispCast Clojure core.async videos</a>. It's a gentle and fun introduction to a great topic. You will learn everything you need to write Token Bucket and more!</p>
<div class="subscribe-form-wrapper">
  <form class="subscribe-form"
        action="https://lispcast.us4.list-manage.com/subscribe/post?u=a33b5228d1b5bf2e0c68a83f4&amp;id=d0f96276d9"
        method="POST"
        name="mc-embedded-subscribe-form"
        novalidate="true">
      <h3 class="subscribe-form-title">
        
Get a Free core.async Reference Sheet
</h3>
    
<img class="subscribe-form-image"
         src="http://www.lispcast.com/img/core_async_reference_thumb.png">
<div class="subscribe-form-text">
      <p class="subscribe-form-description">
        
Subscribe below to receive a free copy of the core.async reference sheet. If you are interested in core.async, this reference sheet contains lots of the important functions in a handy format. You'll also get a few emails introducing you to core.async.
</p>
      
<input id="mce-EMAIL.email-field"
             type="email"
             value=""
             placeholder="Email"
             name="EMAIL"> <input type="hidden"
             name="group[18565][8]"
             value="1">
<div style="position: absolute; left: -5000px;">
        
<input type="text"
               name="b_a33b5228d1b5bf2e0c68a83f4_d0f96276d9">
</div>
      
<input class="subscribe-button"
             type="submit"
             value="Get it"
             name="subscribe">
<div class="field-text-text2">
        
No spam. Ever.
</div>
    </div>
  </form>
</div>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/core-async-browser-motivation">core.async in Browsers</a></li>
<li><a href="http://www.lispcast.com/core-async-code-style">core.async Code Style</a></li>
<li><a href="http://www.lispcast.com/core-async-conveyor-belts-true-history">Conveyor Belts: Nature's core.async Channels</a></li>
<li><a href="http://www.lispcast.com/elm-frp-clojure-core-async">Elm FRP in Clojure core.async</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Image credits: <a href="http://www.flickr.com/photos/coldfire/2605474584">token</a> and <a href="http://www.flickr.com/photos/rubyblossom/4227534087">bucket</a>.<a href="#fnref1">↩</a></p></li>
</ol>
</div>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/ultimate-guide-to-learning-clojure-for-free">
              The Ultimate Guide to Learning Clojure for Free
            </a>
          </h2>

          <div class="timestamp">
            December 11, 2014
          </div>

          
<p>Summary: <em>There are many great resources out there for learning Clojure. Some of the resources are paid, but fortunately many of the best resources are absolutely free.</em></p>
<p><strong>Are you interested in learning Clojure?</strong> Would you like to get started without risking your money on a book? Is there something that can help you even know whether you want to learn Clojure?</p>
<p>Well, yes.</p>
<p>I learned Clojure for free. In fact, I'm a bit of a cheapskate. For many years I would avoid spending money if there was a free alternative. I also keep an eye on resources that pop up around the internet.</p>
<p>I have assembled what I believe to be the best resources to start with if you want to get into Clojure but want to spend $0.</p>
<h3 id="beginner">Beginner</h3>
<p>Start here if you have never programmed in Clojure before.</p>
<h4 id="reading">Reading</h4>
<ul>
<li><a href="https://github.com/ClojureBridge/curriculum">ClojureBridge Curriculum</a></li>
</ul>
<p>The ClojureBridge curriculum is a community effort that is informed by real-world workshops. It is excellent for starting.</p>
<ul>
<li><a href="http://www.braveclojure.com/">Clojure for the Brave and True</a></li>
</ul>
<p>A fun and adventurous guide through the Clojure journey.</p>
<ul>
<li><a href="http://aphyr.com/tags/Clojure-from-the-ground-up">Clojure from the Ground Up</a></li>
</ul>
<p>A direct approach to bringing more people (especially underrepresented groups) to the Clojure community. The style of this book is very direct and approachable.</p>
<h4 id="exercises">Exercises</h4>
<p>For beginners, these two exercise sets will give you plenty of practice with the details of the language.</p>
<ul>
<li><a href="http://www.4clojure.com/">4Clojure</a></li>
</ul>
<p>Exercises you can do right in your browser.</p>
<ul>
<li><a href="http://clojurekoans.com/">Clojure Koans</a></li>
</ul>
<p>Exercises you do with git and an editor on your local machine.</p>
<h4 id="editors-and-installation">Editors and Installation</h4>
<ul>
<li><a href="https://github.com/ClojureBridge/curriculum/blob/master/outline/setup.md">ClojureBridge: Getting Set Up</a></li>
</ul>
<p>The best install guide is from <a href="http://www.clojurebridge.org/">ClojureBridge</a>. If you follow this completely you'll have Light Table installed, which is a great (and open source) editor that makes Clojure development very easy.</p>
<h4 id="documentation">Documentation</h4>
<ul>
<li><a href="https://github.com/jafingerhut/clojure-cheatsheets/tree/master/pdf">Clojure Cheatsheet</a></li>
</ul>
<p>An organized list of built-in Clojure functions and macros.</p>
<ul>
<li><a href="http://conj.io/">Grimoire</a></li>
</ul>
<p>A searchable version of the cheatsheet with documentation, source code, and examples.</p>
<h4 id="workshops-and-events">Workshops and Events</h4>
<ul>
<li><a href="http://www.clojurebridge.org/">ClojureBridge</a></li>
</ul>
<p>ClojureBridge hosts free workshops around the world to encourage diversity in the Clojure community. Go to one if you can.</p>
<ul>
<li><a href="http://clojure.meetup.com/">Clojure Meetups</a></li>
</ul>
<p>There are many groups on Meetup.com that are interested in Clojure and functional programming. Find one in your area and get in touch.</p>
<h4 id="online-community">Online Community</h4>
<ul>
<li><a href="http://irc.lc/freenode/clojure/irctc">#clojure IRC channel on freenode</a></li>
</ul>
<p>Always hundreds of people on and someone to help you if you get stuck.</p>
<ul>
<li><a href="https://groups.google.com/forum/#!forum/clojure">Clojure Google Group</a></li>
</ul>
<p>Clojure discussion group. This contains everything from announcements of new library releases to beginners asking questions.</p>
<ul>
<li><a href="http://stackoverflow.com/">stackoverflow</a></li>
</ul>
<p>Ask questions on stackoverflow. They are usually answered very quickly.</p>
<h4 id="videos">Videos</h4>
<ul>
<li><a href="https://vimeo.com/68375202">Stuart Halloway: Introduction to Clojure</a></li>
</ul>
<p>A great high-level introduction to the philosophy behind Clojure.</p>
<h3 id="intermediate">Intermediate</h3>
<p>Once you've got the basics and need to go deeper.</p>
<h4 id="reading-1">Reading</h4>
<ul>
<li><a href="https://github.com/clojure-cookbook/clojure-cookbook">Clojure Cookbook</a></li>
</ul>
<p>An open source, community-built book (also available for purchase). It includes many real-world, practical &quot;recipes&quot;.</p>
<h4 id="exercises-1">Exercises</h4>
<ul>
<li><a href="http://exercism.io/">exercism.io</a></li>
</ul>
<p>Once you're writing Clojure code, do these exercises and get comments on your style.</p>
<ul>
<li><a href="https://projecteuler.net/">Project Euler</a></li>
</ul>
<p>These exercises are not Clojure-specific. They are small problems but are usually tricky enough to require deep thinking. I cut my Clojure teeth on Project Euler before other systems existed.</p>
<h4 id="documentation-1">Documentation</h4>
<ul>
<li><a href="https://clojure.github.io/clojure/clojure.core-api.html">Clojure API Docs</a></li>
</ul>
<p>The official documentation.</p>
<ul>
<li><a href="http://clojuredocs.org/">ClojureDocs</a></li>
</ul>
<p>A searchable community documentation project.</p>
<ul>
<li><a href="http://crossclj.info/">CrossClj</a></li>
</ul>
<p>Cross-references between Clojure libraries. Very interesting stuff.</p>
<h4 id="editors">Editors</h4>
<p>At this point, you may want to think about dedicating some time to learning a different editor. Emacs is the most popular, and many people use vim.</p>
<ul>
<li><a href="http://clojure-doc.org/articles/tutorials/emacs.html">Emacs + CIDER</a></li>
</ul>
<p>An Emacs plugin called CIDER is the most popular way to use Emacs with Clojure. It gives you lots of functionality.</p>
<ul>
<li><a href="http://www.neo.com/2014/02/25/getting-started-with-clojure-in-vim">vim + Fireplace</a></li>
</ul>
<p>Many people use vim, so if you like it, here's a setup guide.</p>
<h3 id="conclusions">Conclusions</h3>
<p>There is a ton of value in these free resources. But if you'd like to venture into something that is tailored for bringing up up to speed in Clojure from nothing to writing code and you don't mind paying, check out <a href="http://www.purelyfunctional.tv/intro-to-clojure">LispCast Introduction to Clojure</a>. It's 95 minutes of screencasts, exercises, and visuals and there's nothing else like it.</p>
<div class="article-offer-box">
  
<a class="article-offer-box-link" href="http://www.purelyfunctional.tv/intro-to-clojure">
<div class="article-offer-box-text-wrapper">
      <div class="article-offer-box-text">
        <div class="article-offer-box-text-pitch">
          
Learn Functional Programming using Clojure with screencasts, visual aids, and interactive exercises
</div>
        <div class="offer-box-buy-button">
Learn more
</div>
      </div>
    </div>
    
<img class="article-offer-image" src="http://www.purelyfunctional.tv/img/intro-shot.png"> </a>
</div>



<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/3-things-java-can-steal-from-clojure">3 Things Java Programmers Can Steal from Clojure</a></li>
<li><a href="http://www.lispcast.com/atom-problem">Atom code explanation</a></li>
<li><a href="http://www.lispcast.com/clojure-gazette-looking-forward-2015">Clojure Gazette Looking Forward</a></li>
<li><a href="http://www.lispcast.com/clojure-is-imperative">Clojure is Imperative</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/unit-testing-in-functional-languages">
              Example-based Unit Testing in Clojure
            </a>
          </h2>

          <div class="timestamp">
            March 26, 2015
          </div>

          
<p>Summary: <em>Unit testing in Clojure is straightforward. Here are a few testing ideas as they apply to Clojure.</em></p>
<p>Most of the Unit Testing literature discusses how to unit test Object Oriented code. However, Unit Testing is very useful for functional code, including Clojure. <strong>I'd like to document a few unit testing ideas as they relate to Clojure.</strong></p>
<h3 id="the-unit-youre-testing-is-the-function">The Unit you're testing is the function</h3>
<p>Unit testing is about testing the smallest unit of code. In Object Oriented languages, the unit is the class. In functional languages, <strong>the unit is typically the function</strong>. This is true in Clojure. If you're testing individual functions, you're unit testing Clojure.</p>
<h3 id="example-based-tests">Example-based tests</h3>
<p>The easiest kind of tests to do is example-based, which means you test that <strong>for a given argument, you get a known return value</strong>. Let's look at a simple example:</p>
<pre><code>(deftest addition-tests
  (is (= 5 (+ 3 2)))
  (is (= 10 (+ 5 5))))</code></pre>
<p>You're testing that <code>+</code> works on two different inputs! Notice: 2 lines and 2 inputs, it looks like we'll get <strong>linear growth in tests as our coverage increases</strong>.</p>
<h3 id="round-trip-testing">Round-trip testing</h3>
<p>Ok, it's not exactly unit testing, if you are strictly going by the definition of &quot;unit&quot;, because you're actually testing <em>two</em> functions. But who's really being so strict? A really <em>useful</em> kind of test is the <strong>round-trip test</strong>.</p>
<p>In Clojure, <code>pr-str</code> prints a value readably, meaning if the value <em>can</em> be read back in, this will make a string that could be read in using <code>clojure.edn/read-string</code>. You can do a round-trip from value to string back to value, and the two values should be equal. <strong>You're testing the property that these two functions are inverses of each other.</strong></p>
<p>Example:</p>
<pre><code>(deftest pr-str-read-string-round-trip
  (is (= [1 2 3] (read-string (pr-str [1 2 3]))))
  (is (= {:a :b :c :d} (read-string (pr-str {:a :b :c :d})))))</code></pre>
<p>Again, we're getting <strong>linear test growth</strong>.</p>
<p>Here's another example where I test that addition is the opposite of subtraction:</p>
<pre><code>(deftest +---round-trip
  (is (= 5 (-&gt; 5 (+ 10) (- 10))))
  (is (= 10 (-&gt; 10 (+ 100) (- 100)))))</code></pre>
<h3 id="what-examples-to-test">What examples to test</h3>
<p>If you're writing example-based tests one-by-one, and you're getting linear benefit for your examples, you've really <strong>got to maximize what you test</strong>, because linear growth is actually quite bad. In that case, what do you test? The best thing to test are the corner cases. Corner cases are mostly domain-dependent, but there are some domain-independent ones.</p>
<h4 id="empty-collections">Empty collections</h4>
<p>It's good to test what happens when you call a function on an empty collection. It could be that you didn't handle that, or didn't handle it correctly. The biggest gotcha is stuff like dividing by the size of the collection. If it's empty, the size is zero, and that's undefined.</p>
<h4 id="empty-strings">Empty strings</h4>
<p>The bane of the web programmer's existence, empty strings are usually not valid input, but of course that doesn't stop someone from passing one in. Are you testing that it's valid?</p>
<h4 id="zero">Zero</h4>
<p>Zero is actually a typical corner case. Try it out.</p>
<h4 id="one">One</h4>
<p>One is also a typical corner case.</p>
<h4 id="normal-cases">Normal cases</h4>
<p>You should have at least one normal case to test the expected behavior. A normal case is a list with 5 elements, or a small integer (7, 12, 34).</p>
<h4 id="bugs">Bugs</h4>
<p>Now, here's the thing that makes having a test system set up totally worth it: <strong>having a place to put test for known and fixed bugs</strong>. If someone reports a bug, it's really nice to reproduce it in code in a failing test <em>before</em> you fix it. If the bug happened once, it could happen again, so make it part of your anti-regression suite.</p>
<h3 id="multiple-assertions-on-the-return-value">Multiple assertions on the return value</h3>
<p>One last thing that happens in Clojure is you want to assert a few things about the same return value. Instead of calling the function several times, why not save the value and assert a few things about it?</p>
<pre><code>(deftest map-test
  (let [return (map - [1 2 3 4 5 6 7])]
    (is (= 7 (count return)))
    (is (every? neg? return))))</code></pre>
<h3 id="one-step-further">One step further</h3>
<p>Ok, I've mentioned a few times that example-based testing does not scale. Code coverage grows linearly as the number of examples grows. How do you get better than linear? One way is to use <a href="https://github.com/clojure/test.check">property-based testing</a> (also known as generative testing). Instead of the programmer giving examples, the program generates examples! Here's a preview:</p>
<pre><code>(defspec edn-roundtrips 50
  (prop/for-all [a gen/any]
    (= a (-&gt; a prn-str edn/read-string))))</code></pre>
<p>This tests that any value (<code>gen/any</code>) can be printed to a string and read back in, and you get an equivalent value. Three lines. You can run this with as many randomly generated values as you'd like. Thousands. Millions. With three lines. That's leverage.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Ok, those are just a few ideas that could <strong>get you started with example-based unit testing in Clojure</strong>. If you'd like to start automated testing in Clojure, I suggest you check out <a href="http://www.purelyfunctional.tv/intro-to-clojure">LispCast Intro to clojure.test</a>. <code>clojure.test</code> is the built-in, standard Clojure testing library that most systems use (or are compatible with). The LispCast course is an interactive course with animation, examples, screencasts, text, code samples, and more!</p>
<p>Now, if you'd like to up your game at testing, and want to get more than linear bang for your buck, you've got to get into <a href="https://github.com/clojure/test.check">generative testing</a>.</p>
<div class="subscribe-form-wrapper">
  <form class="subscribe-form"
        action="https://lispcast.us4.list-manage.com/subscribe/post?u=a33b5228d1b5bf2e0c68a83f4&amp;id=d0f96276d9"
        method="POST"
        name="mc-embedded-subscribe-form"
        novalidate="true">
    <h3 class="subscribe-form-title">
      
<a href="http://www.purelyfunctional.tv/intro-to-clojure-test">LispCast Intro to clojure.test</a>
</h3>
    
<a href="http://www.purelyfunctional.tv/intro-to-clojure-test"> <img class="subscribe-form-image"
           src="http://www.purelyfunctional.tv/img/clojure-test-shot.jpg"> </a>
<div class="subscribe-form-text">
      <p class="subscribe-form-description">
        
Learn how to use <code>clojure.test</code>, the built-in Clojure testing library. It's used for all sorts of tests, from unit to integration. This course will teach you the fundamentals of the library and the common conventions that will help you make the most of your tests. Subscribe now and be the first to know when the course is published. Also, get lots of free Clojure resources when you sign up. <a href="http://www.purelyfunctional.tv/intro-to-clojure-test">Learn more.</a>
</p>
      
<input id="mce-EMAIL.email-field"
             type="email"
             value=""
             placeholder="Email"
             name="EMAIL"> <input type="hidden"
             name="group[18565][32]"
             value="1">
<div style="position: absolute; left: -5000px;">
        
<input type="text"
               name="b_a33b5228d1b5bf2e0c68a83f4_d0f96276d9">
</div>
      
<input class="subscribe-button"
             type="submit"
             value="Get it"
             name="subscribe">
<div class="field-text-text2">
        
No spam. Ever.
</div>
    </div>
  </form>
</div>





<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/announcing-lispcast-intro-to-clojure-test">Announcing: LispCast Intro to clojure.test</a></li>
<li><a href="http://www.lispcast.com/clojure-test-directory">Clojure Test Directory</a></li>
<li><a href="http://www.lispcast.com/clojure-test-launch">LispCast Intro to clojure.test</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/what-web-framework-should-i-use">
              What Web Framework Should I Use in Clojure?
            </a>
          </h2>

          <div class="timestamp">
            March 23, 2014
          </div>

          
<p>Summary: <em>There are a number of web frameworks in Clojure, but beginners should roll their own server stack themselves to tap into the Ring ecosystem.</em></p>
<p>One question that I am asked a lot by beginners in Clojure is <strong>&quot;What web framework should I use?&quot;</strong> This is a good question. In Python, there's Django. In PHP, Drupal. And of course in Ruby, there's the king of all web frameworks, Ruby on Rails.</p>
<p>What framework should you use in Clojure? The question is actually kind of hard to answer. There are a number of web frameworks out there. Some people call <a href="https://github.com/weavejester/compojure">Compojure</a> a framework, though it is really a library. <a href="https://github.com/noir-clojure/lib-noir">lib-noir</a> does a lot of work for you. Then there's your true frameworks, like <a href="https://github.com/pedestal/pedestal">Pedestal</a> or <a href="http://hoplon.io/">Hoplon</a>, which provide infrastructure and abstractions for tackling web development. All of these projects are great, but for a beginner, <strong>I have to recommend building your own web stack starting with Ring</strong>.</p>
<p>Compojure is really just a routing library, not a framework. You can use it for your routing needs, though there are alternatives, such as <a href="https://github.com/ericnormand/playnice">playnice</a>, <a href="https://github.com/juxt/bidi">bidi</a>, <a href="https://github.com/clojurewerkz/route-one">Route One</a>, and <a href="https://github.com/thatismatt/gudu">gudu</a>. <strong>If you don't want to decide, use Compojure. It's widely used and works great.</strong> If you want to go in depth, read the docs for the others. They are each good for different cases.</p>
<p><a href="https://github.com/noir-clojure/lib-noir">lib-noir</a> comes from <a href="http://www.webnoir.org/">Noir</a>, which was a web framework (now deprecated). It was easy and provided a bit of plumbing already built for you, so you could just start a project with a lot of the infrastructure built in. lib-noir is that infrastructure in library form. I haven't used it, but a lot of people like it. However, when I look at it, I see that <strong>most of what it provides I either won't use or it is trivial to add myself</strong>. That would normally be ok if there was huge adoption for it (like with Rails) so you get an ecosystem effect, but there isn't. <strong>lib-noir is used but certainly not dominant.</strong></p>
<p><a href="https://github.com/pedestal/pedestal">Pedestal</a> has a lot of backing. It aims to tackle single-page apps by providing a sane front-end environment using ClojureScript in the form of a message queue. If you're into &quot;real-time apps&quot;, this may be for you. Though, I would caution you that it's not for a Clojure beginner. <strong>Pedestal introduces a lot of new concepts that even experienced Clojure programmers have to learn.</strong> The <a href="https://github.com/pedestal/app-tutorial/wiki">tutorial</a> is long and arduous. You will have problems learning Pedestal without knowing Clojure.</p>
<p><strong>Update:</strong> <em><a href="https://groups.google.com/forum/#!topic/pedestal-users/jODwmJUIUcg">Pedestal has changed dramatically</a> since I last looked at it. It is no longer a frontend framework. It is now a high-performance backend server for high performance asynchronous processing. It's worth looking at if you need that. Otherwise, I stick with my recommendation to use basic Ring.</em></p>
<p><a href="http://hoplon.io/">Hoplon</a> is also designed for web apps. It gives you a DOM written in ClojureScript (including custom components), dataflow programming (like a spreadsheet), and client-server communication. It's a bold step, but again, <strong>requires you to buy into programming models that will take a long time to understand</strong>. If you are not already familiar with Clojure, you are asking for trouble.</p>
<p>There are other frameworks out there. But I recommend rolling your own stack. If you're learning Clojure, <strong>the best way to grasp how web apps work is to get a <a href="https://github.com/ring-clojure/ring">Ring</a> Jetty adapter set up with some basic handlers</strong>. Add existing middleware as you need it. Write some middleware of your own. Use Compojure to route. Use <a href="https://github.com/weavejester/hiccup">Hiccup</a> to generate HTML. <strong>That setup will get you a long way.</strong></p>
<p>Ring is just functions. With a few basic concepts and a copy of the Ring SPEC handy, you can build a web server very quickly that does exactly what you want and <strong>you can understand every aspect of it</strong>. The experience of building one yourself can teach you a lot about how the other frameworks are put together.</p>
<p>What's more, Ring <em>is</em> dominant. Most people write functionality (in the form of middleware and handlers) assuming Ring and no more. So by staying close to the metal, you are <strong>tapping into a huge resevoir of pre-written libraries that are all compatible with each other</strong>. Ring is the locus for the Clojure web ecosystem.</p>
<p>Wiring up your own middleware stack is not that daunting. If you want guidance, <strong>my <a href="http://www.purelyfunctional.tv/web-dev-in-clojure">Web Development in Clojure video series</a> is now for sale</strong>. It starts with a brand new Clojure project and ends with a fully functional app, backed by a database, and hosted on Heroku (for free!). In one hour, <strong>it explains all the concepts and shows you lots of examples</strong>. There's lots of exercises to get your brain whirring.</p>
<p>Recommended stack:</p>
<ul>
<li><a href="https://github.com/ring-clojure/ring">Ring</a> (with Jetty adapter)
<ul>
<li><a href="http://ring-clojure.github.io/ring/ring.middleware.params.html#var-wrap-params">wrap-params</a> (parsing params)</li>
<li><a href="https://github.com/ring-clojure/ring/blob/master/ring-devel/src/ring/middleware/reload.clj">wrap-reload</a> (for development)</li>
<li><a href="http://ring-clojure.github.io/ring/ring.middleware.resource.html#var-wrap-resource">wrap-resource</a> and <a href="http://ring-clojure.github.io/ring/ring.middleware.file-info.html#var-wrap-file-info">wrap-file-info</a> (static files)</li>
</ul></li>
<li><a href="https://github.com/weavejester/compojure">Compojure</a></li>
<li><a href="https://github.com/weavejester/hiccup">Hiccup</a></li>
</ul>
<p>Then keep adding and customizing.</p>
<div class="subscribe-form-wrapper">
  <form class="subscribe-form"
        action="https://lispcast.us4.list-manage.com/subscribe/post?u=a33b5228d1b5bf2e0c68a83f4&amp;id=d0f96276d9"
        method="POST"
        name="mc-embedded-subscribe-form"
        novalidate="true">
      <h3 class="subscribe-form-title">
        
Get a Free Ring Spec to hang on your wall
</h3>
    
<img class="subscribe-form-image"
         src="http://www.lispcast.com/img/ring_spec_1_3.png">
<div class="subscribe-form-text">
      <p class="subscribe-form-description">
        
Subscribe below to receive a free copy of a Ring Spec to hang on your wall. If you are programming in Ring (covered in the videos), you'll find it very useful as a reference. You'll also hear about exclusive previews and discounts of other video courses.
</p>
      
<input id="mce-EMAIL"
             class="email-field"
             type="email"
             value=""
             placeholder="Email"
             name="EMAIL"> <input type="hidden"
             name="group[18565][4]"
             value="1">
<div style="position: absolute; left: -5000px;">
        
<input type="text"
               name="b_a33b5228d1b5bf2e0c68a83f4_d0f96276d9">
</div>
      
<input class="subscribe-button"
             type="submit"
             value="Get it"
             name="subscribe">
<div class="field-text-text2">
        
No spam. Ever.
</div>
    </div>
  </form>
</div>



<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/cascading-separation-abstraction">Separation, Abstraction, and Cascading in CSS</a></li>
<li><a href="http://www.lispcast.com/clojure-web-security">Clojure Web Security</a></li>
<li><a href="http://www.lispcast.com/hiccup-tips">Hiccup Tips</a></li>
<li><a href="http://www.lispcast.com/json-serialization-api-clojure">JSON Serialization for APIs in Clojure</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


      <div class="notes">

      </div>

    </div>

    <footer class="footer-banner">
      <a class="footer-previous"
         href="page5.html">
        <i class="fa fa-chevron-left footer-arrow"></i>
      </a>
      <a class="footer-next"
         href="page3.html">
        <i class="fa fa-chevron-right footer-arrow"></i>
      </a>
    </footer>


    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script>

      document.write('<script src="https://oberon.herokuapp.com/cookie/get.js?_=' + (new Date()).getTime() + '"><\/script>');

          if(window.oberon && mixpanel) {
            if(document.cookie.indexOf('oberon-id') < 0) {
              var expires = (new Date((new Date().getTime() + 1000*60*60*24*365*10))).toUTCString();
              mixpanel.alias(window.oberon.id);
              document.cookie = "oberon-id=" + window.oberon.id + ";expires=" + expires + ";path=/";
            }
            mixpanel.identify(window.oberon.id);
          }

      mixpanel.register({URL: window.location.pathname,
                         Title: $("title").text()});

      mixpanel.track("Page Visit");

      mixpanel.track_forms('.gazette-form', 'Submit Clojure Gazette');
      mixpanel.track_forms('.subscribe-form', 'Subscribe');

      mixpanel.track_links('a.homepage-offer-box-link',
                           'Click PurelyFunctional.tv',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      mixpanel.track_links('a.js-clojuregazette',
                           'Click Clojure Gazette',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      $('input[name=EMAIL]').change(function() {
                                                      var i = $(this);
                                                      window.o_email = i.val();
                                                      });

      $('form').submit(function() {
        if(window.o_email)
          mixpanel.people.set({"$email": window.o_email});
});

    </script>

  </body>
</html>
