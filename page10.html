<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>LispCast</title>
    <meta name="description" content="A blog about the simple joys of functional programming.">
    <meta name="author" content="Eric Normand">

    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/styles.css" type="text/css">

    <link rel="alternate" type="application/rss+xml" title="LispCast" href="/feed" />

<!-- start Mixpanel --><script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
mixpanel.init("ffad2bd88d2cb690edbbba6cf30b2958");</script><!-- end Mixpanel -->
  </head>

  <body>
    <header class="banner">
      <h1 class="banner-logo">
        <a href="/">
          <img class="banner-logo-img"
               src="/img/Logo@2x.png"
               alt="LispCast" />
        </a>
      </h1>

      <div class="meta-data">
        <img class="bio-img"
             src="/img/eric_bio.jpg" />
        <a class="twitter-link"
           href="http://twitter.com/ericnormand">
          <i class="fa fa-twitter"></i>
        </a>
        <a class="github-link"
           href="https://github.com/ericnormand">
          <i class="fa fa-github"></i>
        </a>
        <a class="mail-link"
           href="mailto:eric@lispcast.com">
          <i class="fa fa-envelope"></i>
        </a>
        <a class="rss-link"
           href="/feed">
          <i class="fa fa-rss-square"></i>
        </a>
        <a class="rss-link"
           href="/archive.html">
          <i class="fa fa-list"></i>
        </a>
      </div>

    </header>

    <div class="main-container">


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/token-buckets-in-core-async">
              Token Buckets with core.async
            </a>
          </h2>

          <div class="timestamp">
            November 10, 2014
          </div>

          
<p>Summary: <em>Token Bucket is a simple algorithm for rate limiting a resource. It's easy to understand because you can reason about it in terms of real-world objects. core.async makes this algorithm very clear and easy.</em></p>
<div class="figure">
<img src="http://www.lispcast.com/img/token%20bucket.png" alt="Token + BucketImage credits: token and bucket." /><p class="caption">Token + Bucket<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup></p>
</div>
<p>You know you've got a good abstraction when you find lots of algorithms that are easy and clear to write using them. One algorithm that I really like because it's <strong>practical and simple</strong> is called the <a href="http://en.wikipedia.org/wiki/Token_bucket">Token Bucket</a>. It's used for <strong>rate limiting a resource</strong>. And it's very easy to write in core.async.</p>
<p>Let me digress a little. Here in the US, we have a complicated voting system. Not only do your presidential votes count only indirectly, but the counting is done with machines that vary from state to state. Some of those systems are so complicated. It's a little scary because it's hard to know how those machines work.</p>
<p>I mean, relatively hard. It's obviously possible to know, if you study enough. But <strong>compare it to papers in a box</strong>. I know there's all sorts of room for corruption in the papers in a box system. But it's understandable by children. Well, as long as they can count.</p>
<p>The token bucket is similarly simple. There's a bucket. You put tokens in it at a certain rate (for instance, once per hour). If you have a token, you can take an action (ride the subway, send a packet, read a file), then you lose the token (it's good for one ride). If you don't have a token, you can wait. <strong>Everything slows down to the rate of tokens falling into the bucket.</strong></p>
<p>It's so simple. It so easily <strong>corresponds to a real-world situation</strong> you can imagine. I love that type of algorithm.</p>
<h3 id="an-implementation">An implementation</h3>
<p>Let's build Token Bucket in core.async.</p>
<p>First, we need a bucket. For that, we'll use a core.async channel with a buffer. Let's just start with size 10.</p>
<pre><code>(def bucket (chan 10))</code></pre>
<p>Bucket is done. Now, we need something to <strong>add tokens to the bucket at a given rate</strong>.</p>
<pre><code>(go
  (while true
    (&gt;! bucket :token)
    (&lt;! (timeout 1000))))</code></pre>
<p>That will add one token to the bucket every second.</p>
<p>We can rate limit an existing channel by <strong>forcing it to take a token before values get through</strong>.</p>
<pre><code>(defn limit-rate [c]
  (let [out (chan)]
    (go
      (loop []
        (let [v (&lt;! c)]
          (if (nil? v) ;; c is closed
            (close! out)
            (do
              (&lt;! bucket) ;; wait for a token
              (&gt;! out v)
              (recur))))))
    out))</code></pre>
<h3 id="corner-cases">Corner cases</h3>
<p>Ok, it's not that simple. There are two corner cases.</p>
<ol style="list-style-type: decimal">
<li>What happens when nobody takes a token out of the bucket? Do you keep putting coins in?</li>
</ol>
<p>The answer is yes. In the next hour, there are two tokens, so two can come through. But then . . .</p>
<ol start="2" style="list-style-type: decimal">
<li>What do you do when the bucket gets really full and a whole bunch of people take tokens out at the same time?</li>
</ol>
<p>Well, you let them all through. One token, one ride. There's no other coordination. And that means it's really important to choose the size of your bucket.</p>
<p>The number of tokens your bucket can hold is called the <em>burstiness</em>. It's because when the bucket is full, you could get a rampage of people trying to get on the subway. How many people should be allowed through at that point? <strong>The burstiness is the maximum that should come through at a time.</strong></p>
<p>We have our two parameters: the <em>rate</em> and the <em>burstiness</em>. Let's incorporate all of that.</p>
<pre><code>(defn limit-rate [c r b]
  (let [bucket (chan b) ;; burstiness
        out (chan)]
    (go
      (while true
        (&gt;! bucket :token)
        (&lt;! (timeout (int (/ 1000 r)))))) ;; rate
    (go
      (loop []
        (let [v (&lt;! c)]
          (if (nil? v) ;; channel is closed
            (close! out)
            (do
              (&lt;! bucket) ;; wait for a token
              (&gt;! out v)
              (recur))))))
    out))</code></pre>
<p>The burstiness is taken care of in the size of the buffer. The buffer will fill up if no one takes a token. Since we're using blocking buffers, <strong>putting tokens into a full bucket will block</strong> until something takes a token--exactly as the algorithm describes.</p>
<p>Well, that's it. It's easy. And now <strong>we have a way to limit the rate of a channel</strong>. We can use it to limit the rates of other things, too, like a function call or access to a database. I use it to rate limit an API.</p>
<p>core.async makes this algorithm nice and easy to use. There's a library that does this for you in a very convenient package. It's called <a href="https://github.com/brunoV/throttler">Throttler</a>. Bruno Vecchi has done the work of making this work well as a library. If you'd like to learn core.async, I recommend my <a href="http://www.purelyfunctional.tv/core-async">LispCast Clojure core.async videos</a>. It's a gentle and fun introduction to a great topic. You will learn everything you need to write Token Bucket and more!</p>
<div class="subscribe-form-wrapper">
  <form class="subscribe-form"
        action="https://lispcast.us4.list-manage.com/subscribe/post?u=a33b5228d1b5bf2e0c68a83f4&amp;id=d0f96276d9"
        method="POST"
        name="mc-embedded-subscribe-form"
        novalidate="true">
      <h3 class="subscribe-form-title">
        
Get a Free core.async Reference Sheet
</h3>
    
<img class="subscribe-form-image"
         src="http://www.lispcast.com/img/core_async_reference_thumb.png">
<div class="subscribe-form-text">
      <p class="subscribe-form-description">
        
Subscribe below to receive a free copy of the core.async reference sheet. If you are interested in core.async, this reference sheet contains lots of the important functions in a handy format. You'll also get a few emails introducing you to core.async.
</p>
      
<input id="mce-EMAIL.email-field"
             type="email"
             value=""
             placeholder="Email"
             name="EMAIL"> <input type="hidden"
             name="group[18565][8]"
             value="1">
<div style="position: absolute; left: -5000px;">
        
<input type="text"
               name="b_a33b5228d1b5bf2e0c68a83f4_d0f96276d9">
</div>
      
<input class="subscribe-button"
             type="submit"
             value="Get it"
             name="subscribe">
<div class="field-text-text2">
        
No spam. Ever.
</div>
    </div>
  </form>
</div>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/core-async-browser-motivation">core.async in Browsers</a></li>
<li><a href="http://www.lispcast.com/core-async-code-style">core.async Code Style</a></li>
<li><a href="http://www.lispcast.com/core-async-conveyor-belts-true-history">Conveyor Belts: Nature's core.async Channels</a></li>
<li><a href="http://www.lispcast.com/elm-frp-clojure-core-async">Elm FRP in Clojure core.async</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Image credits: <a href="http://www.flickr.com/photos/coldfire/2605474584">token</a> and <a href="http://www.flickr.com/photos/rubyblossom/4227534087">bucket</a>.<a href="#fnref1">↩</a></p></li>
</ol>
</div>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-steven-yi">
              Pre-Conj Interview: Steven Yi
            </a>
          </h2>

          <div class="timestamp">
            October 27, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#steven-yi"><img src="http://www.lispcast.com/img/pre-conj/steven-yi.jpeg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>Steven Yi is next up on the interviews. He will <a href="http://clojure-conj.org/speakers#steven-yi">talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a> about music systems in Clojure. Read the <a href="http://www.lispcast.com/pre-conj-steven-yi">background to his talk</a>.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: How did you get into Clojure?</p>
<p><strong>Steven Yi</strong>: I think I came across it online about two years ago when it started to get a bit of a buzz. I had long wanted to learn a Lisp, but Common Lisp and Scheme never really clicked when I tried. Clojure was different though, and since I do a fair amount of Java programming, the possibility to integrate Clojure with my JVM music software Blue helped motivate me to get into it.</p>
<p><strong>LC</strong>: Can you briefly describe Blue, Pink, and Score?</p>
<p><strong>SY</strong>: Blue is a music composition environment, written in Java using the Netbeans RCP. It is a graphical environment with a score <a href="http://blue.kunstmusik.com/manual/html/scoreTimeline.html">timeline</a>, graphical instruments, mixer and effects, and more. It uses <a href="http://csound.github.io">Csound</a> as its audio engine and signal processing system. (Disclosure: I'm also one of the core developers of Csound.)</p>
<p>Pink is a Clojure library for building music systems. It features a low-level audio engine, higher-order events, and includes signal generation and processing functions.</p>
<p>Score is a Clojure library for higher-level music work, particularly for generating notes and scores using various strategies. It is designed to be generic and usable with multiple backends. Using Score and Pink together can be particularly effective and expressive, having one language for the full musical stack.</p>
<p><strong>LC</strong>: Overtone has been getting a lot of attention lately. How do Pink and Score compare to Overtone?</p>
<p><strong>SY</strong>:Ah yes, certainly the elephant in the room. :) I'll certainly address comparisons to Overtone in more detail during the talk. In a nutshell, Overtone builds upon SuperCollider. Of those two, Pink would compare more to SuperCollider than to Overtone, as it is concerned with low-level audio engine design. Score deals with higher-level abstractions in music, many of which are covered in Overtone. However, because of the full-stack Clojure design between Pink and Score, Score can interact with Pink in ways Overtone/SuperCollider can not. Pink/Score are currently not as mature nor as performant as Overtone/SuperCollider. There's a lot of overlaps between the various systems, and use cases and requirements for a user's project will guide them to one system or the other.</p>
<p>Hopefully that's enough to get going! I think the breakdown of music systems design I'm planning for the talk should hopefully make things clear.</p>
<p><strong>LC</strong>: Is there any resource that could help someone new to Clojure, or new to music systems, get the most out of your talk?</p>
<p><strong>SY</strong>: think it's a tough question about music systems as I don't know of any resources out there that really introduce the subject. Having some experience with Overtone would certainly be useful. I can say I'll probably mention <a href="http://supercollider.github.io/">SuperCollider</a>, <a href="http://csound.github.io/">Csound</a>, <a href="https://ccrma.stanford.edu/software/clm/">Common Lisp Music</a>, <a href="http://www.cs.cmu.edu/~music/nyquist/">Nyquist</a>, and <a href="http://commonmusic.sourceforge.net/">Common Music</a> during the talk:</p>
<p>and perhaps <a href="http://incudine.sourceforge.net/">Incudine</a> and <a href="http://opusmodus.com/">OpusModus</a>:</p>
<p>But that's a long list. :P</p>
<p>Actually, the <a href="http://en.wikipedia.org/wiki/MUSIC-N">Wikipedia link to Music-N</a> would probably be a good place to get going.</p>
<p><strong>LC</strong>: Where can people follow you on your adventures?</p>
<p><strong>SY</strong>:</p>
<ul>
<li><a href="http://www.kunstmusik.com">website</a></li>
<li><a href="http://github.com/kunstmusik">github</a></li>
<li><a href="http://twitter.com/kunstmusik">twitter</a></li>
</ul>
<p><strong>LC</strong>: Thanks, Steven, for a great interview! It was a pleasure.</p>
<p><strong>SY</strong>: And thank you too!</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-bozhidar-batsov">
              Pre-Conj Interview: Bozhidar Batsov
            </a>
          </h2>

          <div class="timestamp">
            October 26, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#bozhidar-batsov"><img src="http://www.lispcast.com/img/pre-conj/bozhidar-batsov.jpeg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>Bozhidar Batsov agreed to an interview about his <a href="http://clojure-conj.org/speakers#bozhidar-batsov">talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a> about CIDER, the Clojure Emacs IDE. Read the <a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">background to his talk</a>.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: How did you get into Clojure?</p>
<p><strong>Bozhidar Batsov</strong>: I’m very fond of Lisps and I love exploring new programming languages. In 2009 Common Lisp was my favourite Lisp dialect and I was often solving small programming exercises in it. I wanted to do some “real work” in CL, but the ANSI standard had left out basic things like networking, GUI, etc. and relying on distribution-specific extensions didn’t feel right to me. I was working as a Java developer at the time, so when I stumbled upon a news about the release of Clojure 1.0 I was super excited. A practical Lisp seemed like a dream come true to me! I immediately started playing with Clojure and enjoyed it immensely. I was impressed by the immutable data structures, the seamless Java interop and the powerful concurrency primitives. Along the way I developed a deep appreciation for the merits of functional programming and explored a few other functional programming languages.</p>
<p><strong>LC</strong>: What is CIDER and how did you wind up as its maintainer?</p>
<p><strong>BB</strong>: CIDER is an interactive Clojure development environment for Emacs. It’s pretty similar to <a href="http://common-lisp.net/project/slime/">SLIME</a> (which I consider CIDER’s spiritual ancestor) for Common Lisp and <a href="http://nongnu.org/geiser/">Geiser</a> for Scheme/Racket. People who are not familiar with Emacs should think of CIDER as a Clojure IDE plugin, that provides a ton of useful (Emacs-flavoured) features like interactive code evaluation, code completion, documentation lookup, code navigation and many others.</p>
<p>CIDER is built on top of the popular <a href="https://github.com/clojure/tools.nrepl">nREPL</a> server and replaces SLIME + swank-clojure as the standard way to write Clojure programs in Emacs. A lot of the functionality in implemented in terms of reusable nREPL middleware, which makes the project pretty accessible to Clojurists who are afraid of Emacs Lisp. Portions of CIDER’s middlewares are used in other dev tools like vim’s fireplace and Gorilla REPL.</p>
<p>I was an early adopter of CIDER (which was named nrepl.el back then) as I was pretty excited to use a development environment tailored specifically for Clojure (unlike SLIME). The project felt pretty barebone (compared to SLIME) and my Emacs skill were pretty decent, so I started contributing features and improvements to it (I think the first major thing I contributed were the compilation error highlights). About one year after the project started, the original maintainer Tim King had to step back and handed over the maintenance to me. I’ve been hacking on CIDER pretty actively ever since and I have epic plans for its future! :-)</p>
<p><strong>LC</strong>: What is the best resource for someone who wants to get started with CIDER?</p>
<p><strong>BB</strong>: I guess that for people familiar with Emacs the best resource would be <a href="https://github.com/clojure-emacs/cider/blob/master/README.md">the project's README itself</a>.</p>
<p>Users who are new to Emacs should probably start with some gentler tutorial like <a href="http://clojure-doc.org/articles/tutorials/emacs.html">http://clojure-doc.org/articles/tutorials/emacs.html</a> or perhaps <a href="http://www.braveclojure.com/basic-emacs/">http://www.braveclojure.com/basic-emacs/</a>.</p>
<p>While not strictly necessary, I’d encourage people to also have a look at <a href="https://github.com/clojure-emacs/cider-nrepl/blob/master/README.md">cider-nrepl’s README</a>.</p>
<p>A more extensive user guide (perhaps in texinfo format) and a few screencasts are on the roadmap, but I cannot promise when/if they’ll become a reality. Lots of bugs to squash and features to add prevent me from spending more time on improving the documentation.</p>
<p><strong>LC</strong>: What is the best resource for someone (like me) who has migrated from SLIME and might not know all the cool stuff that's in there now?</p>
<p><strong>BB</strong>: The README lists all prominent config options and commands (or at least I think it does). <a href="https://github.com/clojure-emacs/cider/blob/master/CHANGELOG.md">The changelog</a> is also a great place to discover new features.</p>
<p>There’s a wiki entry on differences with SLIME, but it hasn’t been updated in a while, so people won’t learn much from it. Guess I should find some time to update it!</p>
<p>I’m always planning to write blog posts and do short screencasts for important new features, but unfortunately I never find the time to do so. Who knows, maybe next year...</p>
<p><strong>LC</strong>: Where can people follow your adventures online?</p>
<p><strong>BB</strong>: There are plenty of opportunities for people to stalk me online. :-) Here are some of the best options:</p>
<ul>
<li><a href="https://github.com/bbatsov">https://github.com/bbatsov</a></li>
<li><a href="https://github.com/clojure-emacs">https://github.com/clojure-emacs</a></li>
<li><a href="http://batsov.com/">http://batsov.com/</a> (my personal blog)</li>
<li><a href="http://emacsredux.com/">http://emacsredux.com/</a> (my Emacs blog)</li>
<li><a href="https://twitter.com/bbatsov">https://twitter.com/bbatsov</a></li>
</ul>
<p><strong>LC</strong>: One last question: If Clojure were a zoo animal, what would it be and why?</p>
<p><strong>BB</strong>: A bear! Bears are (arguably) cute, smart and powerful. They are good at pretty much everything - they can run very fast, climb trees and swim. Does this remind you of a certain programming language?</p>
<p><strong>LC</strong>: This was a great interview and I enjoyed it!</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-paul-degrandis">
              Pre-Conj Interview: Paul deGrandis
            </a>
          </h2>

          <div class="timestamp">
            October 25, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#paul-degrandis"><img src="http://www.lispcast.com/img/pre-conj/paul-degrandis.jpg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>Paul deGrandis gave a nice interview about his <a href="http://clojure-conj.org/speakers#paul-degrandis">talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a> about data-driven systems. Read the <a href="http://www.lispcast.com/pre-conj-paul-degrandis">background to his talk</a>.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: How did you get into Clojure?</p>
<p><strong>Paul deGrandis</strong>: I was a very early Clojure adopter. I came from Python (and before that a mix of C/C++/Java/Python), but I had always used Common Lisp to prototype ideas. Once I saw Clojure publicly announced, I gave it a shot and instantly identified with the Clojure Trinity: Simplicity, Power, and Focus. I began using it in all of my proof-of-concept work, and as I became confident in the language, integration with the platform, and my own skill set, I also started putting it into production.</p>
<p><strong>LC</strong>: Can you define Data-Driven systems briefly?</p>
<p><strong>PdG</strong>: Data-driven systems capture their interactions and operations as values - they are one possible conclusion of programming with values. We see this done in Datomic - queries are expressed as data. This concept is easily mapped to other systems - services, client-side applications, and more. Note that is more than just, &quot;data all the things,&quot; this is, &quot;data all the thing's things.&quot; Another example: Pedestal routes are represented as data (&quot;data all the things&quot;), but imagine if we captured the expression of an entire service as data. Imagine the properties that naturally fall out from that design decision. My talk walks through a real project that pushed this design decision as far as possible, and the steps that other developers can follow to do the same for their own systems.</p>
<p><strong>LC</strong>: At Cognitect, they talk about Data &gt; Functions &gt; Macros. Is that what your talk is about?</p>
<p><strong>PdG</strong>: My talk, at a <em>very</em> high level is about &quot;Data &gt; Functions &gt; Macros,&quot; but it's mostly about modeling entire systems (not just interfaces) as data, why you'd want to, and why it's hard. It definitely challenges the previous notions (established by existing tooling) of what the conclusions of &quot;programming with values&quot; actually are (or could/should be). Tangentially, I'll talk about DSLs, but only in regards to constraining your domain as a means to increase expressiveness.</p>
<p><strong>LC</strong>: I'm a big fan of working with data. But I've also seen its dark side. I've seen it pushed too far, or in the wrong area, to where it would have been better to use code. Have you noticed this? How do you avoid that?</p>
<p><strong>PdG</strong>: I have indeed noticed it and it's a topic within my talk. Two crucial pieces of any great design (in software or otherwise) are the external constraints imposed by the problem, and the internal constraints imposed by the designer. Both are important, but it seems common that people overlook self-imposing constraints - and one needs them to achieve a really great design. I don't necessarily agree that capturing a system in data can be pushed too far, but I think it can be done without constraint or design intent - which produces a useless system. The crux is knowing that limitation and working within it. Outside of those limitations and constraints, one should fall back to foundation - regular Clojure code, etc.</p>
<p><strong>LC</strong>: What is one thing you want someone to be able to do after they watch your talk?</p>
<p><strong>PdG</strong>: I want someone to come away with a set of techniques to envision, constrain, and design data-driven systems. I want to create a spark that encourages Clojure developers to look beyond the initial merits of programming with values, and see further-reaching impact within their own systems - how to turn our ecosystem into a set of super powers.</p>
<p>I hope to provide a compelling example of how this approach plays out in production systems, and the general metrics and project impact it has.</p>
<p><strong>LC</strong>: What resources would you recommend to a beginner so they could maximize their understanding of your talk?</p>
<p><strong>PdG</strong>: My talk touches upon a lot of themes covered in some inspiring and informative talks: Tim Ewald's keynote from last year's Conj (<a href="https://www.youtube.com/watch?v=ShEez0JkOFw">Programming with Hand Tools</a>), Rich Hickey's GOTO conference Keynote (<a href="http://www.infoq.com/presentations/Value-Values">The value of values</a>), and previous Conj talks. I'm still searching for literature and books that I like on the topic, but I haven't hit any that I'd strongly recommend.</p>
<p><strong>LC</strong>: Where can people follow your adventures online?</p>
<p><strong>PdG</strong>:</p>
<ul>
<li>My Twitter: <a href="https://twitter.com/OhPauleez">@OhPauleez</a></li>
<li>My Github: <a href="https://github.com/ohpauleez">https://github.com/ohpauleez</a></li>
<li>I sometimes blog: <a href="http://www.pauldee.org/blog/">http://www.pauldee.org/blog/</a></li>
</ul>
<p><strong>LC</strong>: If Clojure rode an animal, what animal would it ride?</p>
<p><strong>PdG</strong>: A very serious pony.</p>
<p><strong>LC</strong>: Thanks for a great interview. It was informative.</p>
<p><strong>PdG</strong>: Thanks a ton! I really appreciate all of this!</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-anna-pawlicka">
              Pre-Conj Interview: Anna Pawlicka
            </a>
          </h2>

          <div class="timestamp">
            October 24, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#anna-pawlicka"><img src="http://www.lispcast.com/img/pre-conj/anna-pawlicka.jpeg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>Anna Pawlicka generously agreed to do an interview about her <a href="http://clojure-conj.org/speakers#anna-pawlicka">talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a>. The <a href="http://www.lispcast.com/pre-conj-anna-pawlicka">background to her talk</a> is available, if you like.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: How did you get into Clojure?</p>
<p><strong>Anna Pawlicka</strong>: During my final year at university I was looking for a contract work or a summer internship and my recruiter suggested a big data startup. Description mentioned Clojure so I solved some 4clojure problems and they sparked my interest. Computer Science course I studied was mostly based on Java so it was refreshing if not challenging to try functional programming. I got a Clojure in Action book, applied for the internship and luckily was offered the job. It was a fun summer: lots of Cascalog queries, friendly Clojure Dojos and interesting talks organised by London Clojure Community. It felt like home and you don’t walk away from that feeling. I stayed for both the language and community.</p>
<p><strong>LC</strong>: You've been presenting and blogging a lot about Om. What are you using Om for and why?</p>
<p><strong>AP</strong>: We’ve been recently working on a building performance platform at Mastodon C (project is open sourced). It’s built around high volumes of data and big part of it was UI programming. We were looking for something that performs well but isn’t t too complex and Om came out just in time for us to solve this problem. We’ve built the entire UI using Om and we combined it with d3.js and core.async for nice data visualisations and user interaction. I don’t think we’d be able to achieve that using vanilla JavaScript. Sure, there were some bumps along the way but the overall reusability makes it worth a while. Outside of my day job I’m working on a in-browser genetic algorithm testing tool, using Om and Quil, but with all the presenting and other activities I had to pause the development for a while.</p>
<p><strong>LC</strong>: I've used React or Om for a few things and it quite simply enables me to develop UI interaction that would be too intricate otherwise. How has your experience with Om been relative to other frameworks?</p>
<p><strong>AP</strong>: I haven’t used any frameworks as it’s just easier to mix and match various Clojure/ClojureScript libraries depending on one’s needs. Om was the first library we’ve tried for interacting with React and it suited our needs well enough that we haven’t had the need to try anything else. If you choose a framework, like let’s say Hoplon, you have to go with its programming model and you lose the ability to control every part of your stack.</p>
<p><strong>LC</strong>: You say you're using Om with d3.js. Om is a very functional style, while d3 uses mutation pervasively. How does the integration work? How well do they work together?</p>
<p><strong>AP</strong>: Fortunately both are driven by data so having d3 visualisations render on your application state change makes perfect sense. I use interop a lot, and although it doesn’t look as nice as pure ClojureScript, it does the job. We can easily replace iteration methods like map and reduce with their ClojureScript alternatives. The only problem is the type coercion between Clojure’s data structures and JavaScript’s Object. It’s not always immediately clear which one should be used where. The perfect option would be to control SVG via Om (or similar library) and use C2’s functions to calculate path data. But I haven’t tried that myself yet. Charts I’ve been working on are quite complex and d3 comes with this gold mine of resources that none of the other visualisation libraries has. I’m not yet done experimenting though.</p>
<p><strong>LC</strong>: Can you explain the basic models of Om and d3?</p>
<p><strong>AP</strong>: D3 performs data-driven DOM manipulation, e.g. you can build a bar chart out of an array of numbers and when your data changes so will your chart. D3 can manipulate any part of DOM and has lots of helper functions to compute our visualisations. React/Om works on DOM as well - we write functions that translate our data into a DOM, but the difference is that the DOM is virtual. Each time the data changes, React/Om compares the old and new state and computes the minimal set of transformations that will be applied to the real DOM. DOM operations are slow so naturally this virtual representation speeds things up by skipping unnecessary transformations. This means that both Om and d3 want to be in control of the DOM inside our component. To make use of both libraries, you can either have Om take care of everything (but this means we need to write functions to compute paths, scales, etc.), or you could use d3’s scales, projection helpers and path generation while having Om generate and manage SVG, or you can have an empty div rendered by Om and allow d3 to generate and manipulate the SVG inside. The latter is the most common approach, probably because we leave the decision whether to re-render to Om (skipping any insignificant data changes), and when Om decides to render the component, d3 takes care of the rest. We combine the best of both.</p>
<p>My talk will include some of that, with examples, since you can’t have a dashboard without a nice chart :)</p>
<p><strong>LC</strong>: I see. It sounds like they work well together. I wouldn't have guessed that.</p>
<p>In the talk you mention live data. How does your system handle that?</p>
<p><strong>AP</strong>: I don’t have an actual system that I plan to demo - the talk is based around various ways to create, reuse and combine Om components to display data. Long polling and HTTP streaming are available through <a href="http://http-kit.org/">HTTP Kit</a>, but I also like how <a href="https://github.com/ptaoussanis/sente">Sente</a> combines that with core.async. But the focus is mainly on the components themselves - how you can mix and match them.</p>
<p><strong>LC</strong>: Really cool.</p>
<p>Talks are always limited in time, and there's lots of context that you assume people have (or wish they have). What is something people can learn more about to help them get ready for your talk?</p>
<p><strong>AP</strong>: I will try to keep the talk as self contained as possible, but I won’t be able to cover things like the basics of web development with ClojureScript - this would be material for a separate talk. However, more and more people are using ClojureScript so I hope most of the attendees shouldn’t have a problem with that. Those who feel that they need to prepare more will find lots of resources online.</p>
<p><strong>LC</strong>: Where can people follow your adventures online?</p>
<p><strong>AP</strong>: The usual: <a href="http://twitter.com/AnnaPawlicka">Twitter</a>, my <a href="http://www.annapawlicka.com/">blog</a> and GitHub <a href="https://github.com/annapawlicka">account</a>. I’m also often on #clojure and #clojurescript IRC channels if someone wants to chat.</p>
<p><strong>LC</strong>: Ok. One last question: when they make a movie about programming languages, who will play Clojure?</p>
<p><strong>AP</strong>: That's a tricky one! I'd say Leonardo DiCaprio since he's one of the best actors yet still without an Oscar (read: very good but underappreciated) :-)</p>
<p><strong>LC</strong>: Thanks for a great, informative interview.</p>
<p><strong>AP</strong>: Thanks for putting this together. It was my first interview and it was fun :)</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-julian-gamble">
              Pre-Conj Interview: Julian Gamble
            </a>
          </h2>

          <div class="timestamp">
            October 24, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#julian-gamble"><img src="http://www.lispcast.com/img/pre-conj/julian-gamble.jpg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>The next interview is with Julian Gamble. His <a href="http://clojure-conj.org/speakers#julian-gamble">talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a> is about core.async and ClojureScript. Read the <a href="http://www.lispcast.com/pre-conj-julian-gamble">background to his talk</a>.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: How did you get into Clojure?</p>
<p><strong>Julian Gamble</strong>: It was about 2007, I was a Java Programmer toying with Rails. I was reading Steve Yegge and his amazing but incendiary blog posts. These had a big theme on languages and expressiveness.</p>
<p>I got curious enough to play with Common Lisp and Racket. I eventually worked through The Little Lisper - and found it hugely inspiring. I also read SICP and Paradigms of Artificial Intelligence Programming and was amazed (coming from Java) at what was possible with functional programming and homoiconicity.</p>
<p>In 2008 I was looking for a way to combine the power of Lisp and my Java background. I had a look at ABCL and Kawa and found they didn't really have much of a community behind them.</p>
<p>Then the Rich Hickey videos started coming out, &quot;Clojure for Java Programmers&quot; etc. Then lots of Java/Lisp people started coming out of the woodwork. I was fascinated by the design choices made and how opinionated the language was. I was delighted by the community that seemed to have come from thin air.</p>
<p>In 2009 Stu Halloway's Programming Clojure book came out and I devoured it. Then I went back and worked through the Little Lisper chapters in Clojure - and found functional programming had a lot more to it than a first-year course for students in the 80s. This meant idiomatic functional programming didn't work like that anymore. (Although the idea of building a Lisp from a few primitives is still very elegant).</p>
<p>In 2011 a Clojure User group started up in Sydney run out of Thoughtworks. This was a fantastic chance to meet up with people who programmed and developed their skills just for the joy of it - rather than just to pay a mortgage.</p>
<p>In 2013 Dave Thomas started running LambdaJam in Australia, and it meant that the functional programming community because more social and more willing to look at each others ideas across languages. It also meant we developed a shared appreciation for the heritage of functional programming. We also developed a deeper appreciation of academic ideas and their linkage back to our practice.</p>
<p>So now in 2014 when Rich Hickey gives a talk on Transducers, and explains that folds are fundamental - I go and read the linked papers from Hutton and Bird. Then I can go and talk about this with my local community of Clojure people. This is something that I wouldn't have done two years ago.</p>
<p>Clojure has been a great ride!</p>
<p><strong>LC</strong>: In your talk description, you mention that you will relate core.async to the concurrency semantics we already know. Can you explain this briefly?</p>
<p><strong>JG</strong>: The assumption here is that most Clojure people have a Java or C# background. From this background they would have an understanding of how to put process on a thread, similar to how we might use a future in Clojure. Alternatively, Clojure people may have seen how we can pass a function to an agent in Clojure.</p>
<p>Now it is true that core.async go blocks have some very specific queue sleep/wait semantics (CSP) that make it different to other concurrency models. In addition, core.async in JavaScript runs as part of the single-thread model of JavaScript, so it isn't semantically a thread, more of a 'process'.</p>
<p>Given those assumptions, the primitives we find for doing concurrency in core.async are very similar to the concurrency models we have seen in the past in OO languages or in Clojure.</p>
<p>In this talk we'll take a look at an example of taking a well known graphical example in Clojure, port it to ClojureScript and core.async. What we find is that many of the Clojure concurrency paradigms have a natural analogue in ClojureScript and core.async.</p>
<p><strong>LC</strong>: Are there any topics to read up on or resources to look at that could help a beginner make the most of your talk?</p>
<p><strong>JG</strong>: First thing to look at is David Nolen's <a href="http://swannodette.github.io/2013/08/02/100000-processes/">10,000 processes</a> and also <a href="http://swannodette.github.io/2013/08/02/100000-dom-updates/">this one</a>.</p>
<p><a href="https://github.com/swannodette/swannodette.github.com/blob/master/code/blog/src/blog/processes/core.cljs">Take a look at the source code</a> and try and understand what it is doing.</p>
<p>Also take a look at <a href="http://www.youtube.com/watch?v=enwIIGzhahw&amp;t=32m20s">Tim Baldridge's 2013 Conj talk at 32:20</a></p>
<p>Also take a look at <a href="https://github.com/halgari/clojure-conj-2013-core.async-examples/blob/master/src/clojure_conj_talk/core.clj#L568-612">the code here</a>: (lines 568-612)</p>
<p>Watch the 1969 version of The Italian Job.</p>
<p><strong>LC</strong>: Where can people follow your adventures online?</p>
<p><strong>JG</strong>: They can follow me on twitter with <a href="https://twitter.com/juliansgamble">@juliansgamble</a>.</p>
<p>Or they can send me an email @ <script type="text/javascript">
<!--
h='&#106;&#x75;&#108;&#x69;&#x61;&#110;&#x67;&#x61;&#x6d;&#98;&#108;&#x65;&#46;&#x63;&#x6f;&#x6d;';a='&#64;';n='&#x6d;&#x61;&#x69;&#108;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+e+'<\/'+'a'+'>');
// -->
</script><noscript>&#x6d;&#x61;&#x69;&#108;&#32;&#x61;&#116;&#32;&#106;&#x75;&#108;&#x69;&#x61;&#110;&#x67;&#x61;&#x6d;&#98;&#108;&#x65;&#32;&#100;&#x6f;&#116;&#32;&#x63;&#x6f;&#x6d;</noscript> and ask me what I'm up to.</p>
<p>(I've also been known to present at <a href="http://www.meetup.com/clj-syd/">clj-syd on meetup.com</a> - but that is probably only of interest to Sydney readers).</p>
<p><strong>LC</strong>: One last question: If Clojure could eat, what would be its favorite food?</p>
<p><strong>JG</strong>: Well I'm a huge fan of Dan Friedman's work on The Little Lisper/Schemer - which has frequent food references, such as a peanut butter and jelly sandwich. The book will at random reserve an empty page and state:</p>
<p>THIS SPACE RESERVED FOR JELLY STAINS!</p>
<p>So the answer would have to be PBJ sandwich!</p>
<p>(But for all the British, European, Australian and New Zealand Readers - we all know it as peanut butter and strawberry jam - and some might be puzzled by the combination of these two condiments, but would still appreciate Friedman's book.)</p>
<p><strong>LC</strong>: Thanks for a great interview!</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-zach-tellman">
              Pre-Conj Interview: Zach Tellman
            </a>
          </h2>

          <div class="timestamp">
            October 23, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#zach-tellman"><img src="http://www.lispcast.com/img/pre-conj/zach-tellman.jpeg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>Zach Tellman is the next interview participant. He is <a href="http://clojure-conj.org/speakers#zach-tellman">giving a talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a> about composition. The <a href="http://www.lispcast.com/pre-conj-zach-tellman">background to his talk</a> is available, if you like.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: Briefly, how did you get into Clojure?</p>
<p><strong>Zach Tellman</strong>: At my first job, the main language was C#. However, I worked with Tom Faulhaber, who is a Common Lisp guy from way back, and at the time was just working on the initial implementation of clojure.pprint. I started playing around with Clojure, and started building <a href="https://github.com/ztellman/penumbra">Penumbra</a> in <a href="http://ideolalia.com/rendering-a-sierpinski-pyramid-in-clojure/index.html">mid 2009</a>. I haven't looked back since.</p>
<p><strong>LC</strong>: Composition is a very important concept in the Clojure world, yet you claim that many libraries can't compose cleanly. Why is it such a problem?</p>
<p><strong>ZT</strong>: Clojure is a young language, and is fairly unique in the way it tries to couple functional idioms with less-than-functional host environments. It also lacks any real organizational principle: a namespace can encompass an enormous amount of functionality (see clojure.core), or a very small, focused piece of functionality (see most of Ring). Both of these allow us enormous flexibility, but it also means that Clojure programmers are without either precedent or obvious affordances when starting out with Clojure. It's understandable that we'd make some missteps.</p>
<p>If we look at the first two or three SQL libraries written for Clojure, it's notable that they all used macros. It became clear after not too long, though, that this was a really limiting approach - the only way to compose with a macro was with more macros. This doesn't mean that macros shouldn't be used, of course, just that we should always be aware of how they constrain the surrounding code. Abstractions that are incredibly useful in application-level code might be irritating and arbitrary in a library.</p>
<p>I think a lot of people begin to innately understand these design considerations after a few years of using Clojure, but I haven't heard anyone try to articulate them in a general form. I guess we'll see how I do at that.</p>
<p><strong>LC</strong>: You mention Ring. I think it's a great example of a system with very good composability. Middleware written by different programmers can be combined without problems. Ring achieves this by being a standard protocol. So there is coordination between the programmers in that they both agree to the centralized standard. Are there other patterns besides standards that can allow for composition?</p>
<p><strong>ZT</strong>: Ring is useful because it's focused. Modeling HTTP requests as a pure function is a lossy abstraction, but it works for the vast majority of requests. If it wasn't so simple, I don't think it would have had nearly as much adoption (see the n-many mostly unused async extensions to Ring that try to accurately model the entire problem space). But by using Ring, we commit ourselves to its simplified view of the world, as well as its thread-per-connection execution model. This is almost always an acceptable simplification, but it transitively limits everything downstream of it. Now we find ourselves in a situation where the entire ecosystem is predicated on this simplified view of things, and anyone who tries to do something more general has to start over from scratch.</p>
<p>So to actually answer your question, composition can't happen without conventions. But conventions, like macros (which really are just conventions of code structure), constrain and shape the code around them. The tradeoffs and resulting design space are what I want to explore.</p>
<p><strong>LC</strong>: You've mentioned that Clojure does not constrain the code. One of the most common questions I answer from Clojure beginners is how to structure their code given the freedom allowed in Clojure. Do you think conventions that support composition could help answer that question?</p>
<p><strong>ZT</strong>: I use a lot of Java-land libraries, so I spend a lot of time reading Javadocs. The nice thing about Javadocs is that even if the actual docstrings are minimal, it gives you a full, unambiguous dependency graph between all the different pieces of code. There's no analogue for that in Clojure, which makes reuse a lot harder than it otherwise would be.</p>
<p>I'm not sure what the solution for this is. I think standardizing on a narrower sort of code structure, like the &quot;class&quot; convention in Javascript, isn't that useful or likely to be popular. Standardized (and better) documentation, though, along with tooling to effectively browse it, would be enormously helpful. Formal specifications of data shapes or types, like Schema or core.typed, might be helpful but I don't think they're a necessary precondition.</p>
<p><strong>LC</strong>: You mention dependency graph. Have you had a chance to look at <a href="http://crossclj.info/">CrossClj</a>? Would that kind of thing be helpful? What would it need to be more helpful?</p>
<p><strong>ZT</strong>: I've looked at it, it's a good place to start, but raw dependency data isn't useful without the tooling to integrate it into our development process. Light Table and others are playing around in this space, but it's a genuinely hard problem, because it's not a one-size-fits-all visualization problem. I don't have any solutions to offer, but I'm certainly paying attention to how things develop.</p>
<p><strong>LC</strong>: So there are going to be a lot of beginners at the conj. Are there any resources that could prepare them to make the most of your talk? Any blog posts or videos that would get them ready to participate actively?</p>
<p><strong>ZT</strong>: I'll talk about macros, transducers, and core.async, among other things. Being conversant in each will help, but isn't necessary.</p>
<p><strong>LC</strong>: Where can people follow you and your adventures?</p>
<p><strong>ZT</strong>: I twit about software sometimes at <a href="https://twitter.com/ztellman">https://twitter.com/ztellman</a>. I write longer stuff less often at <a href="http://ideolalia.com/">http://ideolalia.com/</a>.</p>
<p><strong>LC</strong>: Ok, last question: What is the average airspeed velocity of an unladed Clojure REPL?</p>
<p><strong>ZT</strong>: JVM or V8?</p>
<p><strong>LC</strong>: I don't know that!</p>
<p>Thanks for the interview. It was very informative.</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-zach-oakes">
              Pre-Conj Interview: Zach Oakes
            </a>
          </h2>

          <div class="timestamp">
            October 22, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#zach-oakes"><img src="http://www.lispcast.com/img/pre-conj/zach-oakes.jpg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>I had a conversation with Zach Oakes about game development in Clojure. He is <a href="http://clojure-conj.org/speakers#zach-oakes">giving a talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a>. Read the <a href="http://www.lispcast.com/pre-conj-zach-oakes">background to his talk</a>.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: Briefly, how did you get into Clojure?</p>
<p><strong>Zach Oakes</strong>: Being hosted on the JVM was my original draw to Clojure. I wanted to hack on an anonymous networking project called I2P, which is written in Java, but I wanted to use a more enjoyable language. Clojure's interop made it effortless, and later on I came to enjoy the other aspects of Clojure as well.</p>
<p><strong>LC</strong>: How long have you been into games programming?</p>
<p><strong>ZO</strong>: Games were how I originally got into programming as a teenager. However, I had a ten-year period where I did nothing but crypto software. I only got back into games last year, and since Clojure was my favorite language by then, it was inevitable that I would start using it for game development.</p>
<p><strong>LC</strong>: What is the main concept of play-clj? Is it based on immutable game states, or something else?</p>
<p><strong>ZO</strong>: The main technical concept is that most of your game should just be list transformations, so your code mostly consists of using normal Clojure functions to transform your entities. It definitely encourages immutability, but since it builds on top of a Java framework, there are times when you will need to mutate things.</p>
<p><strong>LC</strong>: What is the advantage of using list transformations instead of mutating game objects? Is this a drastic departure from normal game architectures?</p>
<p><strong>ZO</strong>: The advantage of functional programming in games is the same as in other kinds of software; the code becomes simpler to understand, and parallelism becomes trivial. I think this is very unusual for game development. Many games keep entities as class data members that the methods mutate directly, which quickly becomes a mess.</p>
<p>That said, I think the REPL is by far the biggest reason to use Clojure for game development. A disciplined programmer might be able to avoid the aforementioned mess, but it's hard to replicate the runtime modifiability of Clojure if your language wasn't built for it, and I think it has a big effect on how you make your game.</p>
<p><strong>LC</strong>: What kind of response from game programmers have you had to using functional programming in games?</p>
<p><strong>ZO</strong>: So far the response to functional game development has been tepid. They are understandably conservative about their technical choices due to the performance sensitivity of games, but nonetheless they are slowly adopting functional idioms in their non-functional languages. The next step is to get them to use a functional language. I think it's up for grabs, and the languages that are hosted and provide an excellent REPL will have the advantage.</p>
<p><strong>LC</strong>: Can you tell us a little about play-clj? Is it based on a Java framework?</p>
<p><strong>ZO</strong>: Yes, play-clj is essentially a big wrapper around libGDX, a popular Java framework. I used it to teach Java game development, and eventually made play-clj so I could use Clojure instead. It is a fairly thick wrapper and hopefully a nice teaching tool.</p>
<p>The core of the library is <code>defscreen</code>, a macro in which you provide functions that will be run during various events like &quot;on-show&quot; and &quot;on-key-down&quot;. Making a game consists primarily of transforming your entities in response to these events.</p>
<p>There is always a design compromise when you build on top of a large object-oriented framework, but I think it is crucial to leverage existing work to make it practical to use a functional language to build games worth shipping.</p>
<p><strong>LC</strong>: Yeah, I agree. Game frameworks have a lot of work put into them. Was it a challenge combining OO/mutable state with the Clojure functional approach?</p>
<p><strong>ZO</strong>: It's definitely a challenge, and since this is the first library I've ever made I have been learning as I go along. I took some inspiration from neko, a Clojure wrapper for the Android API, since it is doing something similar. I don't try to hide mutations; most of the library is just a series of macros that allow you to use the underlying Java classes with a nicer syntax.</p>
<p>That said, you can at least keep your core game logic free of side-effects by deferring those mutations until later. In my play-clj games, I typically first map over my entities with a series of pure functions, then afterwards I do various side-effecting things like playing sounds and rendering. This allows me to trivially parallelize the pure portion of my code while also doing the necessary side-effecting things.</p>
<p><strong>LC</strong>: That's pretty cool. I've always wanted to program games, but every time I start, I get lost in a forest of spaghetti code. Have you found that a functional approach makes that better?</p>
<p><strong>ZO</strong>: I think it definitely imposes discipline on your game's code. It is easy in Java to make your entities and other objects data members in a class and mutate them from methods without even explicitly passing them as arguments, which is an easy path to spaghetti code. In play-clj, entities are records so transforming them requires explicitly passing them to functions and returning new ones at the end.</p>
<p>I would say that play-clj also imposes an additional degree of structure as well. It has its own built-in system for managing state, including its own entity system, which is exposed to you in the defscreen macro. I think this causes play-clj games to essentially have the same general design. The downside is that it makes a lot of design decisions for you, so more advanced Clojure programmers may desire a thinner wrapper.</p>
<p><strong>LC</strong>: What resources could a beginner use beforehand to make the most of your talk?</p>
<p><strong>ZO</strong>: I wrote a tutorial for play-clj that people could check out if they'd like to see how it works:</p>
<p><a href="https://github.com/oakes/play-clj/blob/master/TUTORIAL.md">https://github.com/oakes/play-clj/blob/master/TUTORIAL.md</a></p>
<p>There are also some example games they could play to see it in action:</p>
<p><a href="https://github.com/oakes/play-clj-examples">https://github.com/oakes/play-clj-examples</a></p>
<p><strong>LC</strong>: Where can people follow your adventures online?</p>
<p><strong>ZO</strong>: I don't do much social networking, unless Reddit/HN count. I suppose the best way to see what I'm up to is follow <a href="gh">my Github</a>!</p>
<p><strong>LC</strong>: One last question: If Clojure were a Star Trek character from the original series, what character would it be?</p>
<p><strong>ZO</strong>: I suppose Clojure would be all the redshirts collectively. It sounds like a bad thing, but when they died they were always replaced, so I guess that means Clojure will live forever.</p>
<p><strong>LC</strong>: Thanks for the informative interview. It was a pleasure.</p>
<p>*include: templates/pre-conj.html</p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-colin-fleming">
              Pre-Conj Interview: Colin Fleming
            </a>
          </h2>

          <div class="timestamp">
            October 21, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#colin-fleming"><img src="http://www.lispcast.com/img/pre-conj/colin-fleming.jpg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>The next interview is with Colin Fleming. He is the developer of Cursive Clojure. His <a href="http://clojure-conj.org/speakers#colin-fleming">talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a> will be about that. Read the <a href="http://www.lispcast.com/pre-conj-colin-fleming">background to his talk</a>.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: How did you get into Clojure?</p>
<p><strong>Colin Fleming</strong>: I got into Clojure bit by bit, starting about four years ago. I was working in Java on highly concurrent transaction processing systems and the promise of a language that would make that easier was very appealing. I was also playing with Scheme at the time so it seemed like a good fit since I already knew the JVM really well.</p>
<p>I’ve used IntelliJ for Java for years now and I wanted to use it for Clojure too, so I installed La Clojure, which was the only option at the time. But I quickly got frustrated with its limitations and started fixing it up, porting the parts I worked on to Clojure as I went. That was really my first real Clojure project, which in retrospect wasn’t a great choice - it was a tough project to get started on. But it evolved into Cursive, which I’m very happy with, so it worked out well in the end.</p>
<p><strong>LC</strong>: Developing an IDE is quite a big task. And the web site indicates that you will charge for it. What has the response been? How many users do you have in the Early Access Program?</p>
<p><strong>CF</strong>: Right, it’s definitely a big task. Initially Cursive started as a hobby, just scratching my own itch. But I quickly realised that if I was going to develop all the functionality I wanted to add it was at least a full-time job, probably more. I had just taken some time off after leaving my previous job at Google and I thought I would see if there was appetite in the Clojure community for a professionally-supported development environment, and the initial response on the Clojure mailing list was pretty positive.</p>
<p>I released the first public beta version almost a year ago now, and the response has really been fantastic. Quite a few people have asked me when they’ll be able to pay for it so they can continue to support development, which is really nice to hear - I’m really happy people like Cursive so much. It’s hard to tell exactly how many people are using it, but each version tends to get around 10,000 downloads. There’s quite a long tail so it depends how long each version is out for, but generally there are around 2,000 downloads within 24 hours of making a release so I guess that’s roughly the number of people using it daily, or at least have it installed in the copy of IntelliJ that they use daily.</p>
<p><strong>LC</strong>: I use Emacs but I can't really recommend it to someone who just wants to try Clojure. Does Cursive fit that bill and if so, how?</p>
<p><strong>CF</strong>: Sure, I think Cursive is definitely easier to get started with than Emacs. In general IntelliJ’s interface is more like a standard application than Emacs, that familiarity helps a lot. And I try to make sure that Cursive is easy to get started with and to minimise the yak shaving required to open a Leiningen project and a REPL. There are still some outstanding things to do there, a big one has been that Cursive didn’t ship with default keybindings assigned - that’s fixed in the next release which should be out shortly. Cursive also has paredit turned on by default for Clojure which can confuse newbies, but it’s easy to toggle. And Cursive still doesn’t have a great story for a Clojurescript REPL, which is always a big pain point for people getting started - I’m hoping to fix this soon. Light Table really did a great job on that one.</p>
<p>Cursive has a user guide with a lot of screenshots that should hopefully make it easier for people to get started. It’s not 100% up to date with all the latest features, but it should help people to get going. I think having one definitive source of friendly documentation really helps at the beginning. I’d actually like to have an interactive tutorial in the IDE that people could run that would show them how to use the editor and possibly the basics of Clojure too, but that’s looking like a v2 feature at this point.</p>
<p><strong>LC</strong>: I've always liked IDE's for their ability to smooth over the rough parts of a language. And tooling often trumps terseness in a language with less tooling. What are some of the trouble-spots you see in Clojure, from a beginner's perspective, that haven't been addressed with tools?</p>
<p><strong>CF</strong>: The classic one that a lot of people seem to struggle with is the stack traces - I’ve never found them to be too difficult, but I worked with Java for years so I know what they look like. It’s easy to forget how difficult things like that are for people new to the JVM. Leiningen has done a great job of hiding things like the class path and dependency management as well, which can be really tough.</p>
<p>The other thing that I’d really love to see improved is the error messages. Since Clojure macro forms are essentially parsed by hand some of the error messages are really impenetrable. For example, something that might be a common newbie error like putting an <code>(:import)</code> clause ahead of the docstring in an ns form will give you a &quot;java.lang.Character cannot be cast to clojure.lang.Named” error, and will also frequently attribute it to the wrong namespace - these sorts of errors can be really discouraging for someone trying to get started. Cursive internally uses something similar to the seqex library (from Chris Houser and Jonathan Clagget’s great Illuminated Macros talk) for its parsing, I’d love to see libraries like that being used in Clojure core.</p>
<p>Cursive doesn’t actually mark a lot of these errors in the editor yet, but I’d like to mark as many as possible. In particular, I’ll be able to mark things like function invocations with the wrong number of args, non-gensym’ed variables inside syntax-quote and many of the problems detected by tools like Kibit and Eastwood. I hope that’ll make Clojure less frustrating for newbies and more experienced folk alike.</p>
<p><strong>LC</strong>: There's a bunch of stuff I'd like to ask you about. Let's talk about the practical side of developing an IDE. You say it's a plugin for IntelliJ. How much of the IntelliJ system are you able to leverage, how much is custom, and how much is a hack to fit the Clojure peg in the Java hole?</p>
<p><strong>CF</strong>: Right, it’s currently only available as a plugin to IntelliJ. JetBrains actually put a lot of work into making their base platform reusable so I’ll be able to create a standalone IDE as well, as JetBrains have done with Redmine for Ruby, or PyCharm for Python. But it’s a reasonable amount of work and probably adds some support load with cross-platform issues so it hasn’t been a focus for me yet.</p>
<p>The IntelliJ infrastructure is really great - it’s certainly saved me a huge amount of work being able to build on top of it. It’s very impressive how well abstracted it is, I’ve encountered very few places where I’ve had serious roadblocks from IntelliJ itself due to the nature of Clojure. Most of the real difficulties are just intrinsic to how flexible the syntax of Clojure is, they’re not problems with IntelliJ. Obviously all the base IDE functionality comes for free (project management, VCS support, indexing infrastructure, debugger and so forth) and the Java support is very easy to hook into which is important for Clojure. The biggest part that’s totally custom is the symbol resolution, which generally has to be written for each language anyway.</p>
<p>Cursive also supports Clojurescript, and that’s been more challenging since the Javascript support in IntelliJ is only available in the paid Ultimate Edition and is closed source. Cursive currently implements fairly primitive Javascript support itself which is just enough for Clojurescript, but it would be nice to be able to integrate that better with the existing support - I’m hoping to in the future.</p>
<p>The part that is very different in Cursive from a more standard IntelliJ language plugin is that it all has to be extensible since everything in Clojure is based on macros, even core language features. People will eventually have to be able to add support for the libraries they use or for the forms they define in internal projects so Cursive is internally based around an extension API that I’ll open up at some point soon. More conventional languages generally have a fixed syntax, even if it’s very flexible like Ruby for example, so this isn’t an issue for them but it’s essential for Clojure.</p>
<p><strong>LC</strong>: In the talk description, you mention Rename Refactoring. It's not something I can say I miss in Emacs, but perhaps I don't know what I'm missing. Do people make use of that and other refactorings?</p>
<p><strong>CF</strong>: Oh yes, I’d definitely argue that you don’t know what you’re missing out on! The two operations I use a lot are rename and find usages - I’d struggle to live without them now, especially find usages. I also recently added refactorings to extract and inline let bindings, which are really useful - people definitely use them a lot. I’m planning to add support soon for extracting and inlining functions, as well as introducing parameters which I use a lot in Java. Refactoring in Clojure will never be as accurate as in Java, but it’s still very useful. Things like marking unused local variables is also something which sounds trivial but really catches a lot of bugs while you’re editing.</p>
<p>I think this is the main difference between something like IntelliJ and something like Emacs, actually. When I’m working on Java code in IntelliJ the refactorings and all the small operations they provide as intentions are so good that I really feel like I’m working directly on my program, not on text. We’ve all experienced that flow state when programming when you’re totally absorbed in what you’re doing and you lose track of time, whether you’ve eaten or need to go to the bathroom or whatever. IntelliJ makes it much easier for me to achieve that state because it provides a huge number of code manipulations that directly reflect what I want to do to my program, without me then having to muck around with text. I’ve seen comments online along the lines of “IntelliJ is great but I type so much faster in Emacs/vi/whatever”. I’d argue that approach is totally wrong - I don’t want to avoid typing because I’m lazy, I want to avoid typing because text manipulation is the wrong level of abstraction. Cursive is a long way from providing that experience, partly because of Clojure’s language characteristics and partly because it took teams of dozens of smart people at JetBrains years to achieve it for Java, but that’s always my ultimate aim whether or not I ever actually get there.</p>
<p><strong>LC</strong>: What resources would you recommend people make use of before your talk in order to get the most out of it? Anything useful about refactorings or IntelliJ?</p>
<p><strong>CF</strong>: I don’t think so, no - hopefully it’ll be pretty self-contained. I’ll be showing the features I’m talking about and explaining some of the implementation, so hopefully it’ll be understandable to everyone. And hopefully it’ll be interesting for everyone too!</p>
<p><strong>LC</strong>: Where can people follow your adventures online?</p>
<p><strong>CF</strong>: There’s a twitter feed for <a href="https://twitter.com/CursiveClojure">Cursive</a> and there are also some <a href="https://cursiveclojure.com/mailinglist.html">mailing lists for general Cursive discussion</a>. I’ve also been hanging out more in the #clojure channel on IRC as <em>cfleming</em> in case anyone has questions. I’ve been meaning to blog more about Cursive but so far that’s just one to-do item among many!</p>
<p><strong>LC</strong>: Nice. One more question: what is Clojure's favorite breakfast?</p>
<p><strong>CF</strong>: Cursive is most frequently powered by <a href="http://www.puredelish.co.nz/tropical-mango-nut-crunch-breakfast/">Tropical Mango and Nut Crunch</a>, but the true breakfast of the gods is scrambled eggs with little chunks of <a href="http://www.blackballsalami.co.nz/salami.php">Venison Pepperoni salami</a> cooked through it.</p>
<p><strong>LC</strong>: Cool.</p>
<p>Thanks for the great interview. It was fun.</p>
<p><strong>CF</strong>: Thanks Eric, that was fun! I’m looking forward to seeing it, and to catching up at the conj too!</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/pre-conj-interview-ashton-kemerling">
              Pre-Conj Interview: Ashton Kemerling
            </a>
          </h2>

          <div class="timestamp">
            October 20, 2014
          </div>

          
<div class="figure">
<img src="http://www.lispcast.com/img/pre-conj-header.png" />
</div>
<center>
<a href="http://clojure-conj.org/speakers#ashton-kemerling"><img src="http://www.lispcast.com/img/pre-conj/ashton-kemerling.jpeg" /></a>
</center>

<h3 id="introduction">Introduction</h3>
<p>I asked Ashton Kemerling some questions about his <a href="http://clojure-conj.org/speakers#ashton-kemerling">talk</a> at <a href="http://www.clojure-conj.org/">Clojure/conj</a> about using generative testing in Clojure. Read the <a href="http://www.lispcast.com/pre-conj-ashton-kemerling">background to his talk</a>.</p>
<h3 id="interview">Interview</h3>
<p><strong>LispCast</strong>: How did you get into Clojure?</p>
<p><strong>Ashton Kemerling</strong>: The path I took to Clojure is fairly roundabout. During my College years I was very interested in function programming, although ML &amp; Haskell were my favorites back then. I think a large amount of my fascination with them stemmed from the fact that I had more experience than my classmates, my high school had a very rich set of programming courses, and I needed something interesting to play with while taking introduction to OOP courses.</p>
<p>Fast forward a few years and I ended up working at a job using Common Lisp professionally in a legacy web application. The application had a lot of problems due to the condition of CL libraries at the time and we were looking for something to switch to. Clojure was an obvious choice to look at. It's still a lisp, so a lot of our habits would still work, but it fixes the deployment &amp; library issue that CL has while adding a much richer set of data structures. Unfortunately our application relied extensively on mutation (CL doesn't really encourage or discourage any coding style) and OOP, so a conversion was deemed too costly to attempt.</p>
<p>Over the course of the following years I continued to tinker with Clojure on the side. I was convinced it was a great way to do things, but I could never convince anyone to consider using it in their code base. Most places were either too invested emotionally in OOP, or had well tested and working codebases that made a rewrite unwise. So I mostly just hacked on side projects using Clojure over the intervening years without using it professionally. But in the last year or so I realized that Clojure makes a great secondary language for odd-tasks in non-Clojure codebases, which brings me to the current state of using Clojure to test a very large Ruby on Rails and Javascript application.</p>
<p><strong>LC</strong>: Can you give a basic outline of how your Clojure program tested the web front end?</p>
<p><strong>AK</strong>: We've basically tested in two ways. The first was to simply compile our JS file along with Clojurescript tests and run them in a PhantomJS process similarly to how you'd run Clojurescript or Javascript tests normally. We're still working on this approach, but it's slower to work on that I would have hoped.</p>
<p>The second way was to leverage the fact that Clojure's on the JVM. This involves mixing JDBC, HTTP libraries, and Selenium in novel and exciting ways. This has been the most fruitful way of testing, and what I'll be focusing the most on during my talk. We've used the code I've written as both a tool to hunt down API mistakes, and as a means of narrowing down the reproduction steps on complicated bugs reported by the user.</p>
<p><strong>LC</strong>: Can you explain a little more about that? What do you mean by &quot;narrowing down reproduction steps&quot;?</p>
<p><strong>AK</strong>: Sure. I'm testing Pivotal Tracker, a very large (~24kloc) Javascript &quot;single page app&quot;. With large apps like this there are ways for the application to subtly fall out of sync with the server or process data in a degenerate way.</p>
<p>In particular a lot of times you'll get a report from a user that says something along the lines of &quot;I reloaded and it crashed&quot;. You can dig up the logs from that session, but you'll get the last 20 or 30 steps they did before the crash, which doesn't really help you out a whole lot. So we occasionally turn the generative tests towards a type of action (in this case, do things and then refresh) in the hopes that it will help us narrow down to the minimal reproduction steps required to trigger a problem.</p>
<p>In the case that happened last week, we were able to find 2 distinct actions that would provoke the issue reliably after about 20 minutes of test modification and running. Obviously this took hours off of the process required to find the actual root of the bug, since 2 is orders of magnitude easier to work with than 7 or 10 when debugging.</p>
<p><strong>LC</strong>: I see. So how is test.check able to reduce the reproduction steps?</p>
<p><strong>AK</strong>: Test.Check provides &quot;shrinking&quot;. Just as the generators used to create randomized data have the ability to produce more complicated data, they also have the ability to produce less complicated data. Test.Check records all of the failures it finds and attempts to simplify them and find the smallest failing case it can.</p>
<p><strong>LC</strong>: A lot of the Clojure/conj participants will be new to Clojure. What resources would you recommend them to make the most of your talk?</p>
<p><strong>AK</strong>: They can't go wrong with the test.check <a href="https://github.com/clojure/test.check">README</a> or any of the blog posts mentioned therein. I recommend reading the source directly because it's heavily commented, in particular I recommend the <a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.clj">generator source</a>, because the generators represent 90%+ of the test.check API a user will interact with.</p>
<p>Beyond that I have blog posts on <a href="http://www.pivotaltracker.com/community/tracker-blog/generative-testing">my work blog</a> and on <a href="http://ashtonkemerling.com/blog/2014/09/25/integrating-test-dot-check-and-javascript/">my personal blog</a>. Also <a href="http://thinkrelevance.com/blog/2013/11/11/reid-draper-cognicast-episode-045">Reid Draper</a> and <a href="http://blog.cognitect.com/cognicast/ashton-kemerling-064">I were both on the Cognicast</a>, both of which are based around this subject.</p>
<p><strong>LC</strong>: Are there any resources on Selenium and other methods for running frontend tests?</p>
<p><strong>AK</strong>: The <a href="https://github.com/semperos/clj-webdriver">Clj-Webdriver docs</a> are all I can recommend.</p>
<p><strong>LC</strong>: Where can people reach you?</p>
<p><strong>AK</strong>: Twitter: <a href="https://twitter.com/ashton">@ashton</a></p>
<p>My blog: <a href="http://ashtonkemerling.com">ashtonkemerling.com</a></p>
<p><strong>LC</strong>: If Clojure were stranded on a desert island, what one book would it bring?</p>
<p><strong>AK</strong>: A boat building book, clearly.</p>
<p><strong>LC</strong>: Awesome! Thanks for the interview, it was a pleasure.</p>
<hr />

<div class="article-cg-box">
  <p style="font-size:0.8em">
    
<em> This post is one of a series called <a href="http://www.lispcast.com/keyword/pre-conj">Pre-conj Prep</a>. </em>
</p>


<p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>

</div>

<p style="font-size:0.8em">
<em> <a href="http://clojure-conj.org/">Clojure/conj</a> is a conference organized and hosted by <a href="http://cognitect.com/">Cognitect</a>. This information is in no way official. It is not sponsored by nor affiliated with Clojure/conj or Cognitect. It is simply me curating and organizing public information about the conference. </em>
</p>




<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-2014">Pre-conj Prep 2014</a></li>
<li><a href="http://www.lispcast.com/pre-conj-anna-pawlicka">Pre-conj Prep: Anna Pawlicka</a></li>
<li><a href="http://www.lispcast.com/pre-conj-ashton-kemerling">Pre-conj Prep: Ashton Kemerling</a></li>
<li><a href="http://www.lispcast.com/pre-conj-bozhidar-batsov">Pre-conj Prep: Bozhidar Batsov</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


      <div class="notes">

      </div>

    </div>

    <footer class="footer-banner">
      <a class="footer-previous"
         href="page11.html">
        <i class="fa fa-chevron-left footer-arrow"></i>
      </a>
      <a class="footer-next"
         href="page9.html">
        <i class="fa fa-chevron-right footer-arrow"></i>
      </a>
    </footer>


    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script>

      document.write('<script src="https://oberon.herokuapp.com/cookie/get.js?_=' + (new Date()).getTime() + '"><\/script>');

          if(window.oberon && mixpanel) {
            if(document.cookie.indexOf('oberon-id') < 0) {
              var expires = (new Date((new Date().getTime() + 1000*60*60*24*365*10))).toUTCString();
              mixpanel.alias(window.oberon.id);
              document.cookie = "oberon-id=" + window.oberon.id + ";expires=" + expires + ";path=/";
            }
            mixpanel.identify(window.oberon.id);
          }

      mixpanel.register({URL: window.location.pathname,
                         Title: $("title").text()});

      mixpanel.track("Page Visit");

      mixpanel.track_forms('.gazette-form', 'Submit Clojure Gazette');
      mixpanel.track_forms('.subscribe-form', 'Subscribe');

      mixpanel.track_links('a.homepage-offer-box-link',
                           'Click PurelyFunctional.tv',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      mixpanel.track_links('a.js-clojuregazette',
                           'Click Clojure Gazette',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      $('input[name=EMAIL]').change(function() {
                                                      var i = $(this);
                                                      window.o_email = i.val();
                                                      });

      $('form').submit(function() {
        if(window.o_email)
          mixpanel.people.set({"$email": window.o_email});
});

    </script>

  </body>
</html>
