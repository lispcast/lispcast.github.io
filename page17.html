<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>LispCast</title>
    <meta name="description" content="A blog about the simple joys of functional programming.">
    <meta name="author" content="Eric Normand">

    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/styles.css" type="text/css">

    <link rel="alternate" type="application/rss+xml" title="LispCast" href="/feed" />

<!-- start Mixpanel --><script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
mixpanel.init("ffad2bd88d2cb690edbbba6cf30b2958");</script><!-- end Mixpanel -->
  </head>

  <body>
    <header class="banner">
      <h1 class="banner-logo">
        <a href="/">
          <img class="banner-logo-img"
               src="/img/Logo@2x.png"
               alt="LispCast" />
        </a>
      </h1>

      <div class="meta-data">
        <img class="bio-img"
             src="/img/eric_bio.jpg" />
        <a class="twitter-link"
           href="http://twitter.com/ericnormand">
          <i class="fa fa-twitter"></i>
        </a>
        <a class="github-link"
           href="https://github.com/ericnormand">
          <i class="fa fa-github"></i>
        </a>
        <a class="mail-link"
           href="mailto:eric@lispcast.com">
          <i class="fa fa-envelope"></i>
        </a>
        <a class="rss-link"
           href="/feed">
          <i class="fa fa-rss-square"></i>
        </a>
        <a class="rss-link"
           href="/archive.html">
          <i class="fa fa-list"></i>
        </a>
      </div>

    </header>

    <div class="main-container">


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/lisp-with-macros-language-stack">
              Lisp with Macros is Two Languages
            </a>
          </h2>

          <div class="timestamp">
            October 08, 2013
          </div>

          
<p>A Lisp with a macro system is actually two languages in a stack. The bottom language is the macro-less target language (which I'll call the Lambda language). It includes everything that can be interpreted or compiled directly.</p>
<p>The Macro language is a superset of the Lambda language. It has its own semantics, which is that Macro language code is recursively expanded into code of the Lambda language.</p>
<p>Why isn't this obvious at first glance? My take on it is that because the syntax of both languages is the same and the output of the Macro language is Lambda language code (instead of machine code), it is easy to see the Macro language as a feature of the Lisp. Macros in Lisp are stored in the dynamic environment (in a way similar to functions), are compiled just like functions in the Lisp language (also written in the Macro language) which makes it even easier to confuse the layers. It seems like a phase in some greater language which is the amalgam of the two.</p>
<p>However, it is very useful to see these as two languages in a stack. For one, realizing that macroexpansion is an interpreter (called <code>macroexpand</code>) means that we can apply all of our experience of programming language design to this language. What useful additions can be added? Also, it makes clear why macros typically are not first-class values in Lisps: they are not part of the Lambda language, which is the one in which values are defined.</p>
<p>
  <center>
  
<img src="http://www.lispcast.com/img/macro-stack.png" alt="Lisp stack showing both interpretation and compilation" />
</center>
</p>

<p>The separation of these two languages reveals another subtlety: that the macro language is at once an interpreter and a compiler. The semantics of the Macro language are defined to always output Lambda language, whereas the Lambda language is defined as an interpreter (as in <a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.91.4527&amp;rep=rep1&amp;type=pdf">McCarthy's original Lisp paper</a>) and the compiler is an optimization. We can say that the Macro language has translation semantics.</p>
<p>But what if we define a stack that only allows languages whose semantics are simply translation semantics? That is, at the bottom there is a language whose semantics define what machine code it translates to. We would never need to explicitly write a compiler for that language (it would be equivalent to the interpreter). This is what I am exploring now.</p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/exponential-backoff">Exponential Backoff</a></li>
<li><a href="http://www.lispcast.com/try-three-times">Try Three Times</a></li>
<li><a href="http://www.lispcast.com/when-to-use-a-macro">When To Use a Macro in Clojure</a></li>
<li><a href="http://www.lispcast.com/church-vs-curry-types">Church vs Curry Types</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/making-true-false-easy">
              Making True/False Questions Easy
            </a>
          </h2>

          <div class="timestamp">
            September 21, 2013
          </div>

          
<p>When I was training as a teacher, I gave a simple quiz with True/False (T/F) questions. The results were terrible. Worse than chance. On one question, <strong>about 20% of the class got it right</strong>.</p>
<p>I had asked a simple question involving a logical AND:</p>
<blockquote>
<p>True or False?<br />A parallelogram has parallel opposite sides AND it has five sides.</p>
</blockquote>
<p>Eighty percent of the class chose 'True', even though all parallelograms have four sides. The other teachers told me the question was difficult because it was a T/F question. <strong>They said they never give T/F questions because they only confuse the kids.</strong> They said I should just forget about T/F and try a different type of question. But it was my class and my time to explore teaching and I knew that this question was not that hard. Several connections became clear in my mind: <a href="http://lispcast.com/why-technical-explanation-alone-is-not-enough">using the right part of their brains</a>, <a href="http://lispcast.com/tap-into-your-social-brain">making the problem about people</a>, and <a href="http://lispcast.com/use-your-imagination">using their imaginations effectively</a>. I wanted to give it a shot.</p>
<p>I planned the next class around answering True/False questions. There would be an <strong>experiment</strong> to confirm my suspicion (that the kids were using the wrong part of their brains), a lesson using an <strong>imaginative process</strong>, and then a <strong>similar quiz</strong> to see how it worked.</p>
<p>The next morning in class, I wrote the T/F question on the blackboard and called a student up to answer it. He read it and said 'True' (the wrong answer). I asked him &quot;what about this part?&quot;, pointing to the false part. He was clearly confused. The part about five sides was obviously false to him. He then began <em>looking around</em><sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup> through the question and stopped at the first part (the true part). He pointed at it and said 'True', as if it negated the fact that the other part was false. It's hard to describe, but I was convinced that he was simply looking for something that was true to make the whole question true. <strong>And he thought that it was the right answer.</strong> My hypothesis was confirmed: he was using a visual strategy when it was not called for.</p>
<p>I then demonstrated an imagination process for solving True/False questions. It went like this:</p>
<blockquote>
<p>When solving a True/False question, I first imagine someone standing in front of me. He says the statement from the question to me. If he is lying, the answer is <em>False</em>. If he is telling the truth, the answer is <em>True</em>.</p>
</blockquote>
<p>I asked a couple of people to carry out the process while narrating it to me. They seemed to be able to do it (and they got it right). So then I gave the quiz.</p>
<p>The result? Correct answers went <strong>from 20% to 80%</strong>. I felt like I was finally testing their knowledge of the material and not their understanding of test-taking strategies.</p>
<p>How did it work? By <strong>converting the problem from a logic skill to a social skill</strong>, the students could totally bypass the need to process difficult symbolic rules. And we could solve it as a social problem by using a structured process of imagination.</p>
<p>True/False questions are difficult because there are <strong>so many levels of binary confusion</strong>. First, you are looking for the correct (as opposed to the incorrect) answer. Then you must determine the truth value of the whole statement, which is a function of the truth values of the sub-statements. It's just a lot of levels to keep in your head.</p>
<p>The imaginative process cuts through all of that and asks one question: is he lying. <strong>You are offloading the processing to the social part of your brain</strong>, which can easily do it if framed in the right way.<sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup></p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/learning-is-about-skills">How to avoid &quot;Makes sense if you already understand it.&quot;</a></li>
<li><a href="http://www.lispcast.com/pre-west-elena-machkasova">Pre-West Prep: Elena Machkasova</a></li>
<li><a href="http://www.lispcast.com/pre-west-interview-elena-machkasova">Pre-West Interview: Elena Machkasova</a></li>
<li><a href="http://www.lispcast.com/tap-into-your-social-brain">Tap Into Your Social Brain</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Looking indicates visual thinking. <a href="http://lispcast.com/why-technical-explanation-alone-is-not-enough">Use the right part of the brain.</a><a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>In my last post, I hinted at a better way to teach how to determine whether a function is a pure function. The better way is to imagine a robot in front of you. Can he run that function &quot;in his head&quot;? Or does he need to effect the outside world?<a href="#fnref2">↩</a></p></li>
</ol>
</div>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/use-your-imagination">
              Use Your Imagination
            </a>
          </h2>

          <div class="timestamp">
            September 17, 2013
          </div>

          
<p><strong>I always hated in school when the teacher would instruct us to <em>use our imaginations</em> to solve problems.</strong> Well, hmm. Especially as a kid, my imagination was filled with magic. Not very useful. Not that you shouldn't use your imagination. You should. But as an instruction, I find it lacking. The teachers were just being lazy.</p>
<p>See, the thing I learned through a lot of experiments and reading is that our imagination is very powerful if you use it correctly. <strong>But much as our computers can run any possible program, our minds can imagine any situation.</strong> The key to using our imagination effectively is to learn to harness the infinite potential and direct it to a purpose.</p>
<p>One set of techniques I studied was called <em>Neuro Linguistic Programming</em>. It is thoroughly interesting, especially the earliest stuff, but avoid the cultish seminars. The early stuff was based on <a href="http://en.wikipedia.org/wiki/Cybernetics">Cybernetics</a> and linguistics (specifically Noam Chomsky's <a href="http://en.wikipedia.org/wiki/Transformational_grammar">transformational grammar</a>). It was quite rigorous as far as informal studies go. It has since become a new-age movement. Tread carefully if you wish to explore it.</p>
<p>One of the most intriguing aspects of NLP is that it teaches you to discover the structure of a mental process through <strong>introspection in terms of the raw sensory experience</strong>. That is, what do you see, hear, feel, etc. You break it down into the smallest steps that can be measured. You can then understand your own process and give yourself more control over your own apparatus. It sounds like a structured use of imagination. By deconstructing your imagination and guiding another person through the steps, <strong>you can transfer the outline of a skill to someone else</strong>.</p>
<p>I know this must sound like magic. But don't we expect teachers to pass skills on to others? <strong>Teachers routinely break down skills to teach them in a process known as <a href="http://classweb.gmu.edu/ndabbagh/Resources/Resources2/taskanalysis2.htm">task analysis</a>.</strong> You are simply doing it to your imagination. It's not magic. It's not instant knowledge transfer. Practice and experience still count for a lot. But it can get you pretty far.</p>
<p>If it still sounds like magic, all I'm saying is that you switch from A to B:</p>
<p><strong>A:</strong> Pure functions are functions that don't have any side-effects. Use your imagination.</p>
<p><strong>B:</strong> To determine if a function is a pure function, look through the function line-by-line. On each line, imagine a green checkmark if the line has no side-effects. Imagine a red X if it has side-effects. When all lines have been marked, if you have any red X's, your function is not pure.</p>
<p>While correct, the first explanation gives very little help to your imagination. In fact, my first response to explanations of type <strong>A</strong> is to think about what it might mean. But I <em>can</em> use my imagination with effort. When I do that, I realize that I am imagining <em>visually</em> scanning the function (in my mind's eye) and marking lines with side-effects.<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup> The second one asks you to imagine just that. <strong>Asking someone to go through a process makes it clearer.</strong><sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup></p>
<p>NLP does have a lot of merit, especially when it comes to teaching. Our mental processes can be introspected, analyzed, and described. <strong>And we can then guide a student through a process similar to what goes on in our heads when we solve the problem.</strong> This is the last piece I need to tell the story of one of the most successful things I have ever taught. Next time.</p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/learning-is-about-skills">How to avoid &quot;Makes sense if you already understand it.&quot;</a></li>
<li><a href="http://www.lispcast.com/making-true-false-easy">Making True/False Questions Easy</a></li>
<li><a href="http://www.lispcast.com/pre-west-elena-machkasova">Pre-West Prep: Elena Machkasova</a></li>
<li><a href="http://www.lispcast.com/pre-west-interview-elena-machkasova">Pre-West Interview: Elena Machkasova</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>This is a slight lie. I don't use visual checkmarks. I actually <em>feel</em> different when I see an expression with a side-effect. The feeling infects the whole function it is in once I feel it. <strong>My feelings have modeled the scoping rules of the language.</strong> This is the ultimate goal of imagination and skill development--when your simulation is accurate enough to be relied on.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>There is another improvement which I'll get to in the very next post. It will pull together the last few teaching posts.<a href="#fnref2">↩</a></p></li>
</ol>
</div>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/nil-punning">
              Nil Punning (Or Null Pointers Considered Not So Bad)
            </a>
          </h2>

          <div class="timestamp">
            September 12, 2013
          </div>

          
<p>Null pointers are <a href="http://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare">considered by their inventor</a> to be a huge mistake. Clojure inherits its null pointer, called <code>nil</code> in Clojure, from the JVM. In contrast to Java<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup>, Clojure seems to embrace the null pointer. In this post, I'd like to explore how Clojure uses the null pointer in what is often called <em>nil-punning</em>.</p>
<p>Nil-punning has its roots in the very first Lisps, where <code>nil</code> was both false (the boolean value) and the end of a list (the empty list). It was also often used to represent &quot;no answer&quot;, as in what is the first element of an empty list. It is called <em>punning</em> because you can use it to mean different things in different contexts.<sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup></p>
<p><em>In Clojure, <code>nil</code>, as a value, is nearly void of meaning. And it is all pervasive, because it can be returned from any Clojure function or Java method.</em></p>
<p>Let's go through that last part bit by bit.</p>
<ol style="list-style-type: decimal">
<li><strong>It <em>is</em> a value.</strong> Java made the mistake of making <code>null</code> a lack of object even though it was pointed to by an object pointer. You can't call methods on it. It is not an object. It has a weird <em><a href="http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html#4.1">nameless type</a></em>. Clojure did not make this mistake. It is a first-class value and type<sup><a href="#fn3" class="footnoteRef" id="fnref3">3</a></sup>, meaning <em>it can be compared to other values</em>, <em>it can implement protocols</em>, and be used as <em>the key or value of a map</em>, etc. Using <code>nil</code> where it doesn't make sense in Clojure code is <em>usually</em> a type error, not a NullPointerException, just as using a number as a function is a type error.</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li><strong>It is nearly void of meaning.</strong> It means &quot;no answer&quot;, but not much more. Because of this, <em>it can take whatever form fits the context</em>. With proper wisdom in choosing what form it takes, <code>nil</code> can become an asset instead of a liability. Clojure takes nil-punning to an extreme.</li>
</ol>
<p><code>nil</code> can be many things. To name but a few, <code>nil</code> plays <code>false</code> as a boolean. It plays the empty <code>seq</code> as a <code>seq</code><sup><a href="#fn4" class="footnoteRef" id="fnref4">4</a></sup>. It plays the empty map as a map. Because <code>nil</code> has a role to play in most of the major abstractions of core Clojure, it rarely leads you into an <em>error</em> situation. An unexpected nil can surprise a good programmer, just as much as an unexpected <code>Nothing</code> from a Haskell function can bewilder even the most experienced Haskeller. <sup><a href="#fn5" class="footnoteRef" id="fnref5">5</a></sup> Finding out where a <code>nil</code> came from is the hardest problem that <code>nil</code>s present.</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>It is all-pervasive.</strong> <code>nil</code>s are normal parts of Clojure programs. They are not anomalous as in Java, where you often have to check it everywhere. This means it is always on the experienced programmer's mind. <code>nil</code>s flow like water through s-expressions.</li>
</ol>
<p><code>first</code> has nothing to return if the seq is empty, and so it returns <code>nil</code>. Because <code>nil</code> is a seq, <code>first</code> works on <code>nil</code>, and returns <code>nil</code>. <sup><a href="#fn6" class="footnoteRef" id="fnref6">6</a></sup>. <code>rest</code> works on <code>nil</code> as well, because <code>nil</code> is a seq.</p>
<p>These examples show the best of nil-punning. <strong>When nil-punning works right, <code>nil</code>s are expected and they give the expected results.</strong></p>
<p><code>nil</code> is everywhere, but it can be used mostly everywhere as well--without error and often with exactly the desired result. There are many abstractions that <code>nil</code> does not participate in (for instance IFn, which is Clojure's interface for things that can be called like functions). In these places, <code>nil</code> can present a problem--a problem of type, the same as if you tried to call a number as a function.</p>
<p>The best thing to do, in my experience, is simply to wrap the expression in a <code>(when )</code> to catch the <code>nil</code> cases, if appropriate, while also preserving it. Otherwise, perhaps letting the Exception bubble up is the best answer. If you got a <code>nil</code> where you couldn't use one, the stack trace is probably your best clue to where it came from.</p>
<p>After a bit of experience with Clojure, I rarely have <em>difficult</em> problems with out-of-place <code>nil</code>s in pure Clojure code. However, there is often some Java interop--namely, calling Java methods directly--that will cause a NullPointerException if the object of the method call is <code>nil</code>. In these cases, wrapping a Java method call in a <code>(when )</code> is often appropriate. But sometimes not, and the NullPointerException is welcome.</p>
<p>There are some decisions in Clojure that I think make poor use of nil-punning. These places actually make working with Clojure more difficult than they need to be. For instance, <code>(str nil)</code> is the empty string. Printing this out prints nothing--a form of silence, which is rarely what you want so you have to check for <code>nil</code>s in these cases. But <code>nil</code> <em>is not</em> the empty string, like it is the empty <code>seq</code>. <code>(clojure.string/trim nil)</code> throws a NullPointerException. This is inconsistent behavior. <strong>When <code>nil</code> acts inconsistently, nil-punning does not work right. <code>nil</code>s need to be checked. In the worst cases, <code>nil</code>s fail silently.</strong> While I have learned to deal with these situations, they are a wart on the language. The fact that <code>nil</code>s are so common does help surface the bugs sooner. A small consolation.</p>
<p>Let me make it clear: null pointers are still a costly problem in Clojure. But I can make a claim similar to what Haskellers claim about the type system: <em>nil-punning eliminates a certain class of errors</em>. A fortuitous set of decisions in Clojure has reduced the magnitude of the problem. And some decisions have made the problem worse by hiding it. In general, I find that by <a href="http://www.apl.jhu.edu/~hall/lisp/Scheme-Ballad.text">embracing nil-punning</a>, my code gets better.</p>
<div class="article-offer-box">
  
<a class="article-offer-box-link" href="http://www.purelyfunctional.tv/intro-to-clojure">
<div class="article-offer-box-text-wrapper">
      <div class="article-offer-box-text">
        <div class="article-offer-box-text-pitch">
          
Learn Functional Programming using Clojure with screencasts, visual aids, and interactive exercises
</div>
        <div class="offer-box-buy-button">
Learn more
</div>
      </div>
    </div>
    
<img class="article-offer-image" src="http://www.purelyfunctional.tv/img/intro-shot.png"> </a>
</div>


<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/3-things-java-can-steal-from-clojure">3 Things Java Programmers Can Steal from Clojure</a></li>
<li><a href="http://www.lispcast.com/atom-problem">Atom code explanation</a></li>
<li><a href="http://www.lispcast.com/clojure-gazette-looking-forward-2015">Clojure Gazette Looking Forward</a></li>
<li><a href="http://www.lispcast.com/clojure-is-imperative">Clojure is Imperative</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>I don't mean to pick on Java alone. I just wanted to be specific.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Note that this is very different from weak typing as you find in Javascript or Python. Nil-punning is more like polymorphism.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>The type of <code>nil</code> is <code>nil</code><a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>Clojure's core is built on several small, powerful abstractions. The most prominent abstraction is <em>seq</em>, which stands for <em>sequence</em>. <em>seq</em> basically has two operations, <code>first</code> and <code>rest</code>. The most obvious use for them is to iterate through items of a collection. There are built-in implementations for lists, vectors, sets, hashmaps, and even strings. But anything that has a notion of sequential values can implement <em>seq</em>, including Java Iterators. I would also like to posit that the most important and often overlooked implementation of <code>seq</code> is for <code>nil</code> itself.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>Even the best Haskellers complain about not knowing where a Nothing came from.<a href="#fnref5">↩</a></p></li>
<li id="fn6"><p>You might look at this as nil-preserving behavior--much like the Nothing-preserving behavior of the Maybe Monad<a href="#fnref6">↩</a></p></li>
</ol>
</div>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/tap-into-your-social-brain">
              Tap Into Your Social Brain
            </a>
          </h2>

          <div class="timestamp">
            September 11, 2013
          </div>

          
<p>Let's look at this logic problem:</p>
<p><center>
<img src="http://lispcast.com/img/logic-cards.png" alt="A logic problem involving cards" />
</center></p>

<p>Try to determine the answer.</p>
<p>Hint: It's presented visually to try to trick you (as we saw <a href="http://www.lispcast.com/why-technical-explanation-alone-is-not-enough">last time</a>).</p>
<p>The answer is <strong>two cards</strong>, the <em>A</em> and the <em>3</em>.</p>
<p>Try this one:</p>
<blockquote>
<p>You are a police officer enforcing this law:</p>
<p>It is only legal for minors to drink non-alcoholic beverages.</p>
<p>You are busy, so you need to quickly assess each bar with the minimum amount of checks.</p>
<p>You walk into a bar, and you see this scene:</p>
<p>There are <strong><em>four people</em></strong> in the bar. One is a <strong><em>teenage boy</em></strong>, but you can't see his drink. One is an <strong><em>old man</em></strong>, and you can't see his drink. The third person has a <strong><em>coke</em></strong><sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup>, but he/she is behind a column so you can't see their age. The last person has a <strong><em>big pint of beer</em></strong>, but he/she is also blocked by a column.</p>
</blockquote>
<p>Did you get the answer? You need to check <strong>two people</strong>. You don't need to check the old man, he's obviously not a minor. You don't need to check the person with a coke, even though he might be underage. That leaves the other two. The teenage boy on the left might have an alcoholic drink (which you can't see), and the person you can't see has a beer, so he/she might be a minor.</p>
<p>Was that easier? Would it surprise you if I told you that <strong>the card problem and the bar problem are equivalent</strong>?<sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup> Why is it easier to solve the bar problem with almost no effort?</p>
<p>There are two reasons: one, it calls on years of built-up, real-world experience. Second, the problem is <em>social</em>--that is, it is about people. We humans are built to handle complex relationships between people. Our reasoning power is somehow magnified and clarified when phrased in terms of people in a familiar situation.</p>
<p><strong>Moral:</strong> When possible present a logic problem as a problem people have no difficulty solving.</p>
<p>What's interesting is that you instantly know the shape of the solution when presented with the bar version of the problem. You think &quot;I'm looking for minors and alcoholic beverages.&quot; Whereas my first reaction to the card version was &quot;I'm looking for vowels and even numbers&quot; (which is wrong). Only after careful, slow, deliberate thinking was I able to see that I should be looking for vowels and odds.</p>
<p>If you present material in the right way, it will help you teach the material better. You've likely had this experience before. <strong>Did your teacher ever do a math problem in terms of buying something and making change?</strong> Somehow, kids who score poorly in math class can still do the same problem when it's presented as a human-to-human exchange!</p>
<p>Social problems are not the only ones that we are hyper-capable of solving. There are also other situations that we are hardwired to understand better than symbolic puzzles. <strong>Spatial orientation</strong> (for instance, that the arm sticking out from behind the column is attached to a person) and <strong>movement</strong> are also easy to solve, and luckily some of the most interesting math problems are equivalent to orientation and motion.</p>
<p>By converting a symbolic problem to one that is a familiar, real-world situation, you are tapping into many different parts of the brain. <strong>The key to a good logic-to-social conversion is whether the problem solver can properly simulate the situation themselves.</strong> The bar problem is good because it's something we can all imagine.</p>
<p>This is one thing I try to take advantage of in <a href="http://www.purelyfunctional.tv">my videos</a>. Yes, you are learning Clojure to solve a very complex problem. However, the problem is familiar to most, as it involves many metaphors and simulated situations. You are teaching someone to bake. A function is like a recipe. Pure functions are like doing a calculation in your head. Side effects move you around or use up ingredients, etc. <strong>I worked hard to make it seamless to learn.</strong></p>
<p>Now that we know that it's easier to learn something if we can already simulate it, the next question is <em>how</em> to convert math/logic problems from their symbolic form into something more suitable for whole-brain simulation. This post is long enough already, so I'll address that next time.</p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/learning-is-about-skills">How to avoid &quot;Makes sense if you already understand it.&quot;</a></li>
<li><a href="http://www.lispcast.com/making-true-false-easy">Making True/False Questions Easy</a></li>
<li><a href="http://www.lispcast.com/pre-west-elena-machkasova">Pre-West Prep: Elena Machkasova</a></li>
<li><a href="http://www.lispcast.com/pre-west-interview-elena-machkasova">Pre-West Interview: Elena Machkasova</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Yes, I come from that <a href="http://www.popvssoda.com/">part of the country</a>.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Here's the conversion: minors are vowels, legal-aged are consonants. Alcoholic drinks are odd numbers, non-alcoholic drinks are even numbers. And legal is true and illegal is false. (That is the big one!)<a href="#fnref2">↩</a></p></li>
</ol>
</div>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="http://www.braveclojure.com/">
              Clojure for the Brave and True
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/brave-clojure">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            September 11, 2013
          </div>

          
<p>I am pretty excited about this project. Please check it out.</p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/3-things-java-can-steal-from-clojure">3 Things Java Programmers Can Steal from Clojure</a></li>
<li><a href="http://www.lispcast.com/atom-problem">Atom code explanation</a></li>
<li><a href="http://www.lispcast.com/clojure-gazette-looking-forward-2015">Clojure Gazette Looking Forward</a></li>
<li><a href="http://www.lispcast.com/clojure-is-imperative">Clojure is Imperative</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="http://blog.jacius.info/2012/05/29/a-personal-lisp-crisis/">
              A Personal Lisp Crisis
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/a-personal-lisp-crisis">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            September 11, 2013
          </div>

          
<blockquote>
<p>There are other languages with healthier communities, more momentum, cleaner cores, and features on par with CL. So I have to ask myself, why bother with CL?</p>
</blockquote>
<p>I had a similar experience with Common Lisp. Great language, snobby community, little progress, needs more modern amenities.</p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/just-hack-something-together">Just Hack Something Together</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/why-technical-explanation-alone-is-not-enough">
              Why technical explanation alone is not enough
            </a>
          </h2>

          <div class="timestamp">
            September 09, 2013
          </div>

          
<p>Here's a problem you might see on a standardized test:</p>
<p><center>
<img src="http://www.lispcast.com/img/logic-puzzle.png" alt="Choose the answer that makes the following statement FALSE: If the Triangle is Red, then the Square is Blue." />
</center></p>

<p>Go ahead and try to solve it. Choose an answer.</p>
<p>When people answer this question on a test, the most common answer is C. Yellow triangle and red square. They try to make the statement false by negating all of the colors.</p>
<p>This is wrong. Actually, the correct answer is A. It is the only one that makes the statement false. Why?</p>
<p>This is a propositional logic problem. The colors and shapes are a red herring. The rule for implication (if-then statement) is:</p>
<blockquote>
<p>An implication is false if the antecedant is true and the consequent is false.</p>
</blockquote>
<p>Kind of boring and therefore hard to understand if you don't already know the rule. It is unlikely that any amount of explanation will help, though you should try to understand if you don't already. Here, try this. If the triangle isn't red, then the statement doesn't apply, so it is true by irrelevance. That eliminates C and D. B obviously makes the statement true, so it must be A.<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup></p>
<p>Researchers found that explanations alone do not help. I read an article<sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup> about a study where similar questions were asked to a group of students. The students were hooked up to <a href="http://en.wikipedia.org/wiki/Electroencephalography">EEG (Electroencephalography)</a> machines to measure what parts of their brains were active during each question. They also asked them to say which ones they thought they got right.</p>
<p><center>
<img src="http://www.lispcast.com/img/eeg.jpg" alt="EEG setup also labeling reasoning/visual areas." />
</center>  
Photo credit: <a href="http://en.wikipedia.org/wiki/File:EEG_recording.jpg">Petter Kallioinen</a>
</p>

<p>What they found was that most of the people who answered A were <em>using their frontal and temporal lobes</em>: the parts of the brain responsible for <em>logic, reasoning, and language</em>. Most of the people who answered C were using their <em>occipital lobes</em>, which is responsible for <em>vision</em>.</p>
<p><strong>Moral #1:</strong> Recognize what type of problem you need to solve. If possible, use the right part of your brain for that problem.</p>
<p>The people who used their vision centers were doing visual pattern matching, <em>looking for shapes and colors</em>. This is typical of a fight-or-flight response, where you are running from a tiger and need to quickly spot it in the jungle.</p>
<p><strong>Moral #2:</strong> Don't get nervous during a test. Anxiety makes some parts of your brain more active--usually the wrong ones.</p>
<p>In addition, the people who used their vision center to answer the question <em>thought they got the answer right</em> just as much as the people who actually got it right.</p>
<p><strong>Moral #3:</strong> The different parts of your brain are good at different tasks. If you ask the occipital lobe to do pattern matching, it will, and it will think it did a good job--even if it is not a pattern matching task.</p>
<p>The second part of the study tried to teach those who got it wrong to do it better next time. They broke them into a control group and an experimental group. The control group got an explanation like the boring one above on how to make an implication false. The experimental group got the same explanation plus they were trained with a little <em>bio-feedback to use the right part of the brain</em>.<sup><a href="#fn3" class="footnoteRef" id="fnref3">3</a></sup></p>
<p>The result was that the control group didn't make any gains. And they <em>still</em> thought they got it right. The experimental group did significantly better. They scored higher and were more likely to say they got the wrong answer when they did get the wrong answer.</p>
<p><strong>Moral #4:</strong> Explanation alone is basically worthless. Even practice is not enough. The key is to recognize what type of problem it is, use the right part of your brain, and don't listen to the rest of your brain. Only then is explanation useful.</p>
<p>Now, this is easier said than done. I don't have an EEG machine. I've never done bio-feedback. But the <em>idea</em> has helped me tremendously when teaching math. <em>It is not hard to recognize when someone is using the wrong part of their brain.</em> First, they <em>confidently</em> get the wrong answer. Second, they are getting the basic mechanics of the problem wrong. They're <em>looking</em> for something. They find the closest thing to what they want. They're done.</p>
<p><em>Logic problems aren't about looking.</em> They're more abstract. Common helpers for doing logic problems are mouthing words, making gestures, and looking <em>away</em> from the problem.</p>
<p>Recognizing whether someone is using the right part of their brain is easy. But now you know explaining won't help. The hard part is to get them <strong>to use the correct part of the brain</strong>. That's what I'll talk about next time.</p>
<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/learning-is-about-skills">How to avoid &quot;Makes sense if you already understand it.&quot;</a></li>
<li><a href="http://www.lispcast.com/making-true-false-easy">Making True/False Questions Easy</a></li>
<li><a href="http://www.lispcast.com/pre-west-elena-machkasova">Pre-West Prep: Elena Machkasova</a></li>
<li><a href="http://www.lispcast.com/pre-west-interview-elena-machkasova">Pre-West Interview: Elena Machkasova</a></li>
</ul>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>If you still don't get it, I'll share one more trick. Convert it into a purely symbolic puzzle to switch off your occipital lobe.</p>
<p>Choose the answer that makes the following statement FALSE:</p>
<pre><code>X -&gt; Y

A.  X &amp; ~Y  
B.  X &amp;  Y  
C. ~X &amp; ~Y  
D. ~X &amp;  Y  </code></pre>
<a href="#fnref1">↩</a></li>
<li id="fn2"><p>I read it back in 2002 and have lost the reference. I tried searching for it and could not find it. The reason I bring it up, even without a citation, is that it has been very important to my thinking about learning. If you know this or a similar study, please let me know.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Yes, it was double-blind. In fact, if I remember correctly, they were all in the same classroom listening to the same lecture. The control group was moved to a room to practice. The experimental group was moved to a different room to practice with EEG bio-feedback machines. Then they took a similar test again.<a href="#fnref3">↩</a></p></li>
</ol>
</div>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">
              Functors, Applicatives, And Monads In Pictures
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/functors-applicatives-and-monads-in-pictures">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            May 22, 2013
          </div>

          
<p>This is a nice, short post. It does the job well, though it might need a few readings if you have never seen these concepts before.</p>
<p>Learn these ideas and get on with your life. The sooner we get over this Functor/Applicative/Monad obsession, the better.</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/3-things-java-can-steal-from-clojure">
              3 Things Java Programmers Can Steal from Clojure
            </a>
          </h2>

          <div class="timestamp">
            March 09, 2013
          </div>

          
<p>The other day I wrote about some <a href="http://www.lispcast.com/java-learn-from-clojure">principles that programming in Clojure</a> makes very clear. Those principles could be applied just as well in Java, and often are. However, there are some things that make Clojure distinct.</p>
<p>Three of those distinctions are the way it deals with state change (using an <a href="http://en.wikipedia.org/wiki/Software_transactional_memory">STM</a>), the <a href="http://clojure.org/data_structures">Persistent Data Structures</a>, and the literal syntax for data with a reader (now called <a href="https://github.com/edn-format/edn">edn</a>). Diving into the <a href="https://github.com/clojure/clojure">source code for Clojure</a>, I realized that these three bits were written in Java. And that means that they can be used from Java. It is certainly not as easy as using them in Clojure, but they are all three powerful enough to warrant using them if you are using Java. <a href="http://mvnrepository.com/artifact/org.clojure/clojure/1.5.0">You simply need to add one more JAR to your project (or add a maven dependency).</a> I have constructed a few minimal examples of their use.</p>
<h3 id="persistent-data-structures">1. Persistent Data Structures</h3>
<p>Clojure comes with several powerful and fast collection classes. The interesting thing about them is that they are immutable. If you want to add an object to a list, you actually create a new list containing the old elements and the new element. Instead of using copy-on-write, it reuses most of the internal structure of the original list, so only a small number of objects need to be allocated. It turns out that this can be done very quickly, comparable to using an <code>ArrayList</code>.</p>
<p>The following example illustrates three of the more useful data structures: Vector, HashMap, and HashSet.</p>
<pre><code>package persistent;

import clojure.lang.IPersistentMap;
import clojure.lang.IPersistentSet;
import clojure.lang.IPersistentVector;
import clojure.lang.PersistentHashMap;
import clojure.lang.PersistentHashSet;
import clojure.lang.PersistentVector;

public class PersistentTest {
  public static void main(String[] args) {
    IPersistentMap m = PersistentHashMap.create(&quot;abc&quot;, &quot;xyz&quot;);
    m = m.assoc(1, 4); // add a new key/value pair
    m = m.assoc(&quot;key&quot;, &quot;value&quot;);
    m = m.without(&quot;abc&quot;); // remove key &quot;abc&quot; 
    System.out.println(m);
        
    IPersistentVector v = PersistentVector.create(1, 2, 3);
    v = v.assocN(0, &quot;a string&quot;); // change index 0
    v = v.cons(&quot;should be last&quot;); // add a string at the end
    System.out.println(v);
            
    IPersistentSet s = PersistentHashSet.create(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
    s = (IPersistentSet) s.cons(&quot;d&quot;); // add d to the set
    s = (IPersistentSet) ((IPersistentMap) s).without(&quot;a&quot;); // remove an element
    s.contains(&quot;g&quot;); // should return false
    System.out.println(s);
  }
}</code></pre>
<p>Now, it ain't pretty. But it's actually no worse than quite a few native Java libraries I've seen. There may be a better way to do this, but this one works.</p>
<h3 id="software-transactional-memory">2. Software Transactional Memory</h3>
<p>Clojure uses <a href="http://en.wikipedia.org/wiki/Multiversion_concurrency_control">Multiversion concurrency control</a> to provide a safe way to manage concurrent access to state shared between threads. In Clojure, they are called <a href="http://clojure.org/refs">refs</a>. I won't go very deep into how it works. Suffice it to say that <a href="http://clojure.org/refs">Clojure refs</a> gives you non-blocking reads and transactional updates without having to do locking yourself. There are two caveats: 1 is that the value you give to the ref has to be immutable. 2 is that you should not perform IO (or perform any mutation) inside of the transaction.</p>
<pre><code>package stm;

import java.util.concurrent.Callable;

import clojure.lang.LockingTransaction;
import clojure.lang.Ref;

public class STMTest {
  public static void main(String[] args) {
    // final needed to be used in anonymous class
    final Ref r = new Ref(1);
    final Ref s = new Ref(5);

    try {
      // run this in a transaction
      // don&#39;t do IO inside
      LockingTransaction.runInTransaction(
        new Callable&lt;Object&gt;() {
          public Object call(){
            s.set((Integer)r.deref() + 10);
            r.set(2);
            return null;
          }
        }
      );
    } catch (Exception e) {
      e.printStackTrace();
    }
        
    System.out.println(r.deref());
    System.out.println(s.deref());
  }
}</code></pre>
<h3 id="extensible-data-notation">3. Extensible Data Notation</h3>
<p>With <a href="https://github.com/clojure/clojure/blob/master/changes.md">Clojure 1.5</a>, <a href="https://github.com/edn-format/edn">edn</a> has become a standard part of the language. Edn is like an extensible JSON where the keys of objects can be any value (not just strings). It is based on the Clojure literal syntax, much in the same way that JSON is based on Javascript literal syntax. It is a nice way to serialize data. And since you already have the JAR in your project, it's a no brainer to use it.</p>
<pre><code>package edn;

import java.io.PushbackReader;
import java.io.StringReader;

import clojure.lang.EdnReader;
import clojure.lang.PersistentHashMap;

public class EDNTest {
  public static void main(String[] args) {
    // reading from a string
    System.out.println(
      EdnReader.readString(&quot;{\&quot;x\&quot; 1 \&quot;y\&quot; 2}&quot;, PersistentHashMap.EMPTY));

    // reading from a Reader
    // really, you can use any Reader wrapped in a PushbackReader
    System.out.println(
      EdnReader.read(new PushbackReader(new StringReader(&quot;#{10 2 3}&quot;)),
                     PersistentHashMap.EMPTY));
  }
}</code></pre>
<div class="article-offer-box">
  
<a class="article-offer-box-link" href="http://www.purelyfunctional.tv/intro-to-clojure">
<div class="article-offer-box-text-wrapper">
      <div class="article-offer-box-text">
        <div class="article-offer-box-text-pitch">
          
Learn Functional Programming using Clojure with screencasts, visual aids, and interactive exercises
</div>
        <div class="offer-box-buy-button">
Learn more
</div>
      </div>
    </div>
    
<img class="article-offer-image" src="http://www.purelyfunctional.tv/img/intro-shot.png"> </a>
</div>



<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/pre-conj-brian-goetz">Pre-conj Prep: Brian Goetz</a></li>
<li><a href="http://www.lispcast.com/atom-problem">Atom code explanation</a></li>
<li><a href="http://www.lispcast.com/clojure-gazette-looking-forward-2015">Clojure Gazette Looking Forward</a></li>
<li><a href="http://www.lispcast.com/clojure-is-imperative">Clojure is Imperative</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


      <div class="notes">

      </div>

    </div>

    <footer class="footer-banner">
      <a class="footer-previous"
         href="page18.html">
        <i class="fa fa-chevron-left footer-arrow"></i>
      </a>
      <a class="footer-next"
         href="page16.html">
        <i class="fa fa-chevron-right footer-arrow"></i>
      </a>
    </footer>


    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script>

      document.write('<script src="https://oberon.herokuapp.com/cookie/get.js?_=' + (new Date()).getTime() + '"><\/script>');

          if(window.oberon && mixpanel) {
            if(document.cookie.indexOf('oberon-id') < 0) {
              var expires = (new Date((new Date().getTime() + 1000*60*60*24*365*10))).toUTCString();
              mixpanel.alias(window.oberon.id);
              document.cookie = "oberon-id=" + window.oberon.id + ";expires=" + expires + ";path=/";
            }
            mixpanel.identify(window.oberon.id);
          }

      mixpanel.register({URL: window.location.pathname,
                         Title: $("title").text()});

      mixpanel.track("Page Visit");

      mixpanel.track_forms('.gazette-form', 'Submit Clojure Gazette');
      mixpanel.track_forms('.subscribe-form', 'Subscribe');

      mixpanel.track_links('a.homepage-offer-box-link',
                           'Click PurelyFunctional.tv',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      mixpanel.track_links('a.js-clojuregazette',
                           'Click Clojure Gazette',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      $('input[name=EMAIL]').change(function() {
                                                      var i = $(this);
                                                      window.o_email = i.val();
                                                      });

      $('form').submit(function() {
        if(window.o_email)
          mixpanel.people.set({"$email": window.o_email});
});

    </script>

  </body>
</html>
