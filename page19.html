<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>LispCast</title>
    <meta name="description" content="A blog about the simple joys of functional programming.">
    <meta name="author" content="Eric Normand">

    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/styles.css" type="text/css">

    <link rel="alternate" type="application/rss+xml" title="LispCast" href="/feed" />

<!-- start Mixpanel --><script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
mixpanel.init("ffad2bd88d2cb690edbbba6cf30b2958");</script><!-- end Mixpanel -->
  </head>

  <body>
    <header class="banner">
      <h1 class="banner-logo">
        <a href="/">
          <img class="banner-logo-img"
               src="/img/Logo@2x.png"
               alt="LispCast" />
        </a>
      </h1>

      <div class="meta-data">
        <img class="bio-img"
             src="/img/eric_bio.jpg" />
        <a class="twitter-link"
           href="http://twitter.com/ericnormand">
          <i class="fa fa-twitter"></i>
        </a>
        <a class="github-link"
           href="https://github.com/ericnormand">
          <i class="fa fa-github"></i>
        </a>
        <a class="mail-link"
           href="mailto:eric@lispcast.com">
          <i class="fa fa-envelope"></i>
        </a>
        <a class="rss-link"
           href="/feed">
          <i class="fa fa-rss-square"></i>
        </a>
        <a class="rss-link"
           href="/archive.html">
          <i class="fa fa-list"></i>
        </a>
      </div>

    </header>

    <div class="main-container">


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="http://prog21.dadgum.com/166.html">
              The Highest-Level Feature of C
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/the-highest-level-feature-of-c">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            February 23, 2013
          </div>

          
<p>I like James Hague's writing. He writes concisely and offers a clear perspective on muddy subjects.</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/monads-and-objects">
              Monads and Objects
            </a>
          </h2>

          <div class="timestamp">
            February 22, 2013
          </div>

          
<p>If you went back to 1990 and asked a random programmer what an object was (as in OOP) what would he say? I bet he'd say something like &quot;I don't know. I want to learn them but I don't know where to start.&quot; If you told him &quot;Well, they're easy. Each object has a class. The class defines methods. The object encapsulates state . . .&quot;, then his eyes would glaze over. He receives a maelstrom of concepts and their relationships. In the end, he would learn nothing. <strong>It actually took a long time for OO to become the norm.</strong></p>
<p>This is analagous to what is happening currently with monads. <strong>People want to learn, they get some high-concept explanation, they are unsatisfied.</strong> People try to explain. They really do. I still remember when I did not get monads, so I have a lot of sympathy.</p>
<p>Perhaps, like with OOP, <strong>it will take a generation to become understandable to the mainstream</strong>.</p>
<p>The best way I can think of to teach monads to a programmer is <strong>jQuery</strong>. You have to know jQuery to understand this example. And frankly, if you don't know jQuery, it is easier to go learn it and come back than to go read a monad tutorial.</p>
<p>Here's a (not-so-)secret: <strong>jQuery objects are a monad</strong>. When you do <code>$('div')</code>, you get an object which &quot;contains&quot; all of the <code>div</code> elements in the document. There are many methods on the jQuery object which modify the set of elements contained in the object and return it. That's what makes it a monad: the methods return a value of the same type.</p>
<p>Without the jQuery object, you have to follow (and re-follow--potentially repeating code) the logic of collections. The jQuery object controls the logic by which operations on the contained set of elements gets executed. You call a method, it changes all of the elements. If there is no element, nothing happens. If there is one element, it alone is changed. If there are many elements, they are all changed. And you don't need to know. If you call <code>$('&lt;div /&gt;')</code>, even though you are constructing an object with only one element, jQuery internally turns it into a list. <strong>jQuery is making sure you don't have to know if you have 0, 1, or many elements.</strong> And this turns out to be a useful abstraction.</p>
<p>This logic is simple. You write this code all the time when you are dealing with collections of objects. But <strong>you have to write this all the time, over and over</strong>. And you have to remember to write it. The jQuery object does that for you.</p>
<p>That is the job of the monad. It gives you a single place to express the logic for access (in this case, a kind of collection logic). <strong>Now we are going to make a monad and show how we can write this logic in only one place.</strong></p>
<p>To make a monad, you actually need two things. One is typically called <code>return</code>, but <strong>in OOP it's the constructor</strong>. We know that the jQuery constructor is the <code>$</code> function.</p>
<p>The second thing you need is <strong>a way to chain methods</strong>. All you need is to return a value constructed with that constructor. Then you can chain. In Haskell, this is called <code>bind</code>.</p>
<p>But I promised that monads got rid of repetition. If <strong>all of your jQuery methods have to contain this collection logic and return logic</strong>, how does that get rid of repetition? Well, if you did it the way it's done in Haskell, you'd get rid of the repetition.</p>
<p>Let's do it that way. Let's define a method on the jQuery called <code>bind</code>.</p>
<pre><code>jQuery.prototype.bind = function (f) {
  return $(f(this.get()));
};</code></pre>
<p>We construct a new jQuery object with the elements transformed by <code>f</code>. So I can write:</p>
<pre><code>function filter_divs(els) {
  var arr = [];
  var i;
  for(i = 0; i &lt; els.length; i++)
    if(els[i].tagName === &#39;div&#39;)
      arr.push(els[i]);
  return arr;
}

$(&#39;.x&#39;).bind(filter_divs).addClass(&#39;hello&#39;);</code></pre>
<p>Let's take it further. We can bind the function and store it in the prototype:</p>
<pre><code>jQuery.prototype.bind_def = function (name, f) {
  jQuery.prototype[name] = function () {
    return $(f(this.get()));
  };
}</code></pre>
<p>Now <strong>we can call it like a method</strong>.</p>
<pre><code>$.bind_def(&#39;filter_divs&#39;, filter_divs);

$(&#39;.x&#39;).filter_divs().addClass(&#39;hello&#39;);</code></pre>
<p>So, now we can chain. <strong>We only have to write the logic once (in <code>bind</code> or <code>bind_def</code>).</strong> And we have a constructor. That's a monad.</p>
<p>Now, imagine other bits of logic you could build into a method chain. What happens if a method returns <code>null</code>? If you call a method on it, it will throw an exception. <strong>You can capture the null check in a monad.</strong> That is called the Maybe Monad.</p>
<p>There are other useful monads, but they all are simply <strong>structured ways of chaining</strong> by giving controlled access to the internals of the object.</p>
<p>Thanks to <a href="http://www.youtube.com/watch?v=dkZFtimgAcM">Douglas Crockford</a> for some of these ideas.</p>
<p>If you liked this essay, please check out the <a href="http://clojuregazette.org/">Clojure Gazette</a>.</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="http://www.youtube.com/watch?v=dkZFtimgAcM">
              Monads & Gonads
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/monads-and-gonads">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            February 21, 2013
          </div>

          
<p>Douglas Crockford gives his version of the obligatory monad tutorial. His version is in Javascript with hopes of needed demystification.</p>
<p>I have to appreciate the freshness of his approach. He says a monad is just an object with certain properties (the monad laws). That's a great way to explain it in an object-oriented context. Objects are the unit of encapsulation. Monads serve the purpose of encapsulating state and allowing structured access to that state.</p>
<p>There is one thing that bothers me about his presentation. He uses mutable objects. I guess that is to be expected in Javascript. But mutating state in a monad seriously limits their possibilities, as mutation does in most uses.</p>
<p>Either way, it is an entertaining watch and a good explanation of monads. Perhaps the most down-to-earth I have seen.</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="http://www.indiegogo.com/projects/redline-smalltalk-v1-0?website_name=smalltalk">
              Redline Smalltalk
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/redline-smalltalk">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            February 21, 2013
          </div>

          
<p>I've been talking to James Ladd about this project and it looks really cool. If you don't know, Smalltalk was the language for which the term <em>Object Oriented</em> was coined. It has a rich history and is one of the most powerful languages ever written.</p>
<p>Redline is an implementation of Smalltalk for the JVM. James and his team have some big plans for Redline, but first they want to get to v1.0 with a robust, professional distribution. By running on the JVM, Redline will be able to tap into the amazing ecosystem that is growing around the JVM. That means that interop is incredibly easy between Smalltalk, Java, and Clojure.</p>
<p><a href="http://www.indiegogo.com/projects/redline-smalltalk-v1-0?website_name=smalltalk">Please check it out.</a></p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/refactor-your-tests">
              Refactor your tests
            </a>
          </h2>

          <div class="timestamp">
            February 21, 2013
          </div>

          
<p>Just a reminder, guys. I always forget. I thought you might, too.</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/screencasts">
              Clojure Screencasts
            </a>
          </h2>

          <div class="timestamp">
            February 12, 2013
          </div>

          
<p>I would like to announce the launch of <a href="http://www.kickstarter.com/projects/376627045/lispcast-introduction-to-clojure-videos">my Kickstarter project</a>. It is a project to develop screencasts to introduce Clojure to programmers everywhere.</p>
<p>Video is a great way to learn programming. For one, you get to watch the program being developed organically, not as a static artifact (as in a book). Also, a voiceover gives a direct stream into the thought process of the programmer as he types. Finally, you can stop and replay as much as you want to learn at your own pace. Those things, combined with video's ability to engage a large part of your brain make it a great learning tool.</p>
<p>This blog was first created to host screencasts I made for Common Lisp, way back when. I transitioned to Clojure after watching a talk by Rich Hickey at <a href="http://lisp50.blogspot.com/">Lisp50</a> in 2008. I was very impressed and have not looked back.</p>
<p>I have loved education ever since I taught math in the Peace Corps. I really enjoyed making those Common Lisp videos as well. I wanted to turn it into something like <a href="https://peepcode.com/">PeepCode</a>, but my day job interceded and I didn't have the comfort level with Clojure that I did with Common Lisp. The videos got put on hold.</p>
<p>That was almost five years ago and I feel very confident with my ability to teach Clojure. Plus, video production has advanced a lot. I will be able to produce very high-quality videos much more easily than five years ago. And Kickstarter has provided a nearly risk-free way to test the market.</p>
<p>If this project does well, I hope to make it into a profitable business and produce more and more videos, especially videos about deeper topics. But only if the project proves itself in the very large beginner's market. Let your friends know about this <a href="http://www.kickstarter.com/projects/376627045/lispcast-introduction-to-clojure-videos">great opportunity</a> to learn Clojure. You can find the Kickstarter project <a href="http://www.kickstarter.com/projects/376627045/lispcast-introduction-to-clojure-videos">here</a>.</p>
<p>My ultimate goal, if the project proves out, is to provide exceptional educational materials to build a strong developer culture. <a href="http://clojuregazette.com/">Clojure Gazette</a> shares this same goal.</p>
<p>One hour of video will cost $5 to the Kickstarter supporters. After that, the price will go up to $12. This is a very good value for one hour of instructional video. There is also a company sponsorship level. See the <a href="http://www.kickstarter.com/projects/376627045/lispcast-introduction-to-clojure-videos">Kickstarter page</a> for more details. The project ends March 14, 2013.</p>
<p>Please support the project and let other people know.</p>
<p>Thanks!</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/cascading-separation-abstraction">
              Separation, Abstraction, and Cascading in CSS
            </a>
          </h2>

          <div class="timestamp">
            December 29, 2012
          </div>

          
<p><em>Summary:</em> <a href="http://lesscss.org/">LESS</a> and <a href="http://sass-lang.com/">Sass</a> (and similar solutions) have saved CSS for three reasons: separation, abstraction, and cascading. While I welcome them, CSS still has other problems which I believe can be solved. I propose some solutions.</p>
<h3 id="introduction">Introduction</h3>
<p>A lot is said about LESS and Sass, and for good reason. CSS is hell to get right and even harder to maintain. LESS and Sass (and similar tools) make CSS into a much more useful language.</p>
<p>But when people talk about why they are so great, they miss the main point. It is true that your style files are now shorter and more readable. However, there is something deeper going on than mere saving of keystrokes and being able to name things.</p>
<p>In this essay, I will try to put into words (and some pictures) what my intuition tells me as a developer and programming language enthusiast to clarify why CSS is innately unmaintainable, does not satisfy its own design goals, and why LESS and Sass make a bad language more bearable. I also will propose solutions which would raise the bar past the high level where LESS and Sass have taken it.</p>
<h3 id="zero-degrees-of-separation">Zero Degrees of Separation</h3>
<p>Way back when, people used HTML tables to style their pages. Documents looked like this:</p>
<center>
<img src="/img/html_content_style.svg" alt="HTML containing content + style" />
</center>

<p>Those were the days of font tags and tables.</p>
<p>Then CSS came along, and people talked a lot about separation of content from presentation. CSS did help you move styling concerns outside of the HTML file, but that is about it.</p>
<center>
<img src="/img/html_css.svg" alt="HTML containing content and CSS containing style" />
</center>

<p>Your styles were still tied to the structure of the document they were styling. They had no grouping of their own. If you wanted to repeat a style, you either had to copy and paste or use a selector with a comma. Both were bad solutions.</p>
<p>An even worse solution, which is, unfortunately the most common, is to build CSS classes which name a style. We see this in the numerous and all equally bad &quot;CSS frameworks&quot; which litter your HTML with style information. Grid systems do this to a fault.</p>
<p>But it is not the fault of the authors of those frameworks, nor of the poor web developers who are in search of some solutions to their problems. No, the blame lies with the authors of CSS itself. With CSS, separation of content from presentation is possible but extremely difficult and time-consuming.</p>
<p>HTML and CSS are separate but not equal. HTML can exist without CSS. But what is CSS without HTML? Nothing.</p>
<p>If you truly want to be able to separate content from presentation, you have to set them both on equal footing, like this:</p>
<center>
<img src="/img/html_css_3.svg" alt="HTML, CSS, plus some third language to tie them together" />
</center>

<p>Content in the HTML, style in the CSS, and you tie them together in some third language.</p>
<p>This is possible in LESS (LESS being the question mark), evidenced by the existence of frameworks such as <a href="http://lesselements.com/">LESS Elements</a>. People talk about LESS reducing boilerplate and repetition. Or about hiding browser-specific CSS properties. But that is not the essence of the matter. What all of that talk is trying to get at is that they can finally define a style, in the form of a mixin, which exists independently of any HTML structure. It can then be tied into zero, one, or more HTML elements merely by mentioning its name.</p>
<p>With LESS, I can define a mixin called Dorothy:</p>
<pre><code>.dorothy() {
  background-color: green;
  text-color: yellow;
  border: 1px solid red;
}</code></pre>
<p>Yes, it is probably an ugly style. But it is just a style. It does not depend on any HTML structure for its existence, not even one <code>&lt;p&gt;</code> tag. Now, if I want to use it, I can use it wherever I want by relating, in a separate way, the style with some HTML.</p>
<pre><code>div.main {
  .dorothy;
}

blockquote {
  .dorothy;
}</code></pre>
<p>This is one of the reasons LESS makes styling HTML bearable. In addition to mixins, you can also define variables which contain sizes and colors, which is just another way to name styles (or elements of styles) to be tied to HTML later.</p>
<center>
<img src="/img/html_css_less.svg" alt="HTML, LESS mixins, and LESS rules" />
</center>

<h3 id="abstraction">Abstraction</h3>
<p>If you take the idea of mixins and variables even further, you will notice that they compose. I can define a mixin and use it in another mixin. I could define <code>dorothy</code> as the composition of three styles, <code>red-border</code>, <code>yellow-text</code>, and <code>green-background</code>. This type of composition suggests that there is some amount of abstraction going on.</p>
<p>This was not possible in HTML + CSS.</p>
<p>Well, I say not possible, but there <em>were</em> ways, they were just terrible. You could copy-paste, which is just not a solution at all, but it would get you your style. Or you could reuse non-semantic class names like in grid frameworks (blech!). Or, finally, you could do what I call &quot;inverted-style&quot;, where the styles take precedence and the selectors take a subordinate role. That will take some explaining.</p>
<p>Let us say we want <code>div.main</code> and <code>blockquote</code> to be styled like <code>dorothy</code>. Also, <code>div.main</code> and <code>p</code> should have a top margin.</p>
<p>Normally, we would write this in CSS:</p>
<pre><code>div.main {
  background-color: green;
  text-color: yellow;
  border: 1px solid red;
  margin-top: 10px;
}

blockquote {
  background-color: green;
  text-color: yellow;
  border: 1px solid red;
}

p {
  margin-top: 10px;
}</code></pre>
<p>This does not look bad, but there is a lot of repetition and the intent is not clear. We could instead write it in inverted-style.</p>
<pre><code>/* Dorothy style */
div.main, blockquote {
  background-color: green;
  text-color: yellow;
  border: 1px solid red;
}

/* Top margin */
div.main, p {
  margin-top: 10px;
}</code></pre>
<p>If we discover that <code>div.footer</code> also needs a top margin, we add it to the selector instead of making a new rule. I bet someone else has come up with this style (and probably a better name for it), but I am unaware of it. I also guess that this was one of the original intentions of the CSS authors. In practice, in my experience, this is hard to keep up. Somehow, I do not have the discipline to keep the styles separated into their own rules. CSS properties that are related to <code>div.main</code> and <code>blockquote</code>, but not to <code>dorothy</code> slip into that first rule, and then all is lost. Maybe a professional could do better, but I have never met one.</p>
<p>I do not have that problem with LESS. It is simple to define a mixin once I identify a consistent set of properties. I can then reuse it wherever I want.</p>
<h3 id="cascading">Cascading</h3>
<p>LESS and Sass provide a pretty good, but partial, solution to the cascading problem. The cascading problem is basically one of complexity. There are too many places for the value of a particular property for a particular element to be set. And the rules for determining the precedence of all of those places are too complex.</p>
<p>The value of a CSS property is determined by these factors:</p>
<ul>
<li>The order of CSS imports</li>
<li>The number of classes mentioned in the CSS rule</li>
<li>The order of rules in a particular file</li>
<li>Any <code>inherits</code> settings</li>
<li>The tag name of the element</li>
<li>The class of the element</li>
<li>The id of the element</li>
<li>All of the element's ancestors in the HTML tree</li>
<li>The default styles for the browser</li>
</ul>
<p>It is just too many factors. Yes, the wisdom is to keep everything clean and simple. That works for small projects but at some point, cascading rules will bite you.</p>
<p>Jason Zimdars shows <a href="http://37signals.com/svn/posts/3003-css-taking-control-of-the-cascade">the solution to cascading</a> they came up with at 37 Signals. He shares a good analysis of the problem and how LESS can alleviate some of the pain.</p>
<blockquote>
<p>For the first time we could write CSS that we knew wouldn’t cause problems later on because they couldn’t cascade out of control. This opened us up to create elements with self contained styles that could be dropped onto most any page and they’d just work.</p>
</blockquote>
<p>Sounds like the holy grail of separation of presentation from content!</p>
<p>By using nested LESS rules and child selectors, we can avoid much of the pain of cascading rules. Combining with everything else, we define our styles as mixins (and mixins of mixins) and tie the styles to the HTML with nested rules which mimic the structure of the HTML.</p>
<p>Perfect, final solution? Not quite.</p>
<h3 id="further">Further</h3>
<p>There are a few more issues to deal with. LESS and Sass were defined as supersets of CSS. That means that your valid CSS files are automatically LESS files as well, which means you can just start using the LESS compiler.</p>
<p>But it also means that LESS has inherited all of the problems it has no solution for. What I will suggest is that we need a subset of CSS to move further, and I will attempt to choose that subset. I would love to hear your suggestions, as well.</p>
<p>Yes, nested rules help you deal with cascading, but there are other issues with cascading. Mixins cannot really help you with the box model. No amount of variables and arithmetic can make two divs have the same width.</p>
<p>I will go through the problems one by one.</p>
<h4 id="cascading-again">Cascading, again</h4>
<p>Let me put it bluntly, cascading was a mistake on the part of the authors of CSS. It has a nice abstract purity to it, but it does not work well in practice.</p>
<p>With hindsight, we see that we really only want one level of cascading. The <a href="http://meyerweb.com/eric/tools/css/reset/">CSS reset</a> was a beautiful invention which neutralized differences between browsers. The CSS reset cut off cascading from the default browser styles and gave you a fresh base to start with. That is really all of the cascading that you want: cascading to a sane default. Other than that, it turns into a mess of spaghetti.</p>
<p>Sometimes it seems that you want some cascading. For instance, you want to set the font family of the entire document. So you declare <code>body { font-family: 'Comic Sans'; }</code> and call your job done. In such a declaration, you are implicitly relying on the inheritance of the font-family property down through the document tree. In fact, if you want every element to have a certain font, you should just say it: <code>* { font-family: 'Comic Sans'; }</code> This has the same effect as a CSS reset: set the default styles for everything in one place.</p>
<p>This implies a rule: Reset once, then avoid cascading. We now just have to systematically apply it. Here is what our setup looks like now:</p>
<center>
<img src="/img/html_less2.svg" alt="HTML, reset, mixins, and style" />
</center>

<p>No cascading means we must restrict ourselves to never select the same elements with different rules. I cannot say how we can do this strictly. But we can define some guidelines.</p>
<ol style="list-style-type: decimal">
<li>Only bare (classless + non-nested) selectors may occur in the reset.</li>
<li>No bare selectors may occur in the LESS rules.</li>
<li>No selector may be repeated in the LESS rules.</li>
</ol>
<p>These guidelines will limit the amount of cascading even further when combined with Zimdars' solution.</p>
<h4 id="common-mistakes">Common mistakes</h4>
<p>I call them mistakes for lack of a better word, but really the blame lies on CSS.</p>
<h5 id="box-model">Box model</h5>
<p>The box model sucks. But we can avoid some of the easy errors to make.</p>
<p>One mistake is what happens when you define the <code>left-margin</code> but not the <code>right-margin</code>. In such a situation, where does the <code>right-margin</code> get determined? Cascading.</p>
<p>And what happens when I set the width to 100%? What if a padding is cascaded in? Oops.</p>
<p>How to deal with this? Do not use individual CSS properties where a compound property exists.</p>
<p>I propose to boycott the following properties:</p>
<ul>
<li><code>left-margin</code>, <code>right-margin</code>, <code>top-margin</code>, <code>bottom-margin</code>; use <code>margin</code> instead</li>
<li><code>left-border</code>, <code>right-border</code>, <code>top-border</code>, <code>bottom-border</code>; use <code>border</code> instead</li>
<li><code>left-padding</code>, <code>right-padding</code>, <code>top-padding</code>, <code>bottom-padding</code>; use <code>padding</code> instead</li>
<li><code>width</code>, <code>height</code>; use the .dimension mixin instead</li>
</ul>
<p>To get more sane behavior, we define this mixin:</p>
<pre><code>.dimension(@w,@h) {
  width       : @w;
  height      : @h;

  margin      : 0;
  padding     : 0;
  border-width: 0;
}</code></pre>
<p>This forces you to set width and height at once, and it resets the margin, padding, and border (which affect actual width, thanks to the box model). You can still override them, you just have to do it explicitly. This does not solve the entire problem of the box model, but it helps cut out a lot of surprising behavior.</p>
<p>My argument for using this mixin is that any time you are setting the dimensions of an element, you should also be explicit about the margin, padding, and border at that point, since they affect the box model.</p>
<h5 id="font-color">Font color</h5>
<p>Now I will pick some nits.</p>
<p>How many times have you seen this code?</p>
<pre><code>body {
  color: black;
  a:link    {color: blue;   }
  a:hover   {color: red;    }
  a:active  {color: blue;   }
  a:visited {color: purple; }
}</code></pre>
<p>Too much! And I always forget one of them. Time for a mixin.</p>
<pre><code>.font-color(@f,@a:blue,@h:red,@c:blue,@v:purple) {
  color: @f;
  a:link    {color: @a};
  a:hover   {color: @h};
  a:active  {color: @c};
  a:visited {color: @v};
}</code></pre>
<p>Again, the pattern is clear: what you do not set explicitly gets reset to a default.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Separating style from content was never fully achieved with CSS. LESS (and Sass) finally allowed the separation to occur. And, using LESS, we can begin to round off the sharp edges of CSS. But instead of adopting a superset of CSS, we should be looking to subset CSS and replace problematic CSS properties with mixins. The subset could be enforced with a linter.</p>
<p>These recommendations are a good start, but there is still a long way to go.</p>
<h3 id="post-script">Post script</h3>
<p>There is one final reflection into CSS cascading that I wanted to mention but could not find a place for it above, mainly because it is not a problem so much as an inconvenience. I have often wondered why in CSS, element styles (styles defined in the <code>style</code> attribute of an HTML tag) take precedence over all other styles. Similarly, why do styles defined in the HTML (in a <code>style</code> tag) take precedence over those that are linked to externally? It has always made more sense to me that it should be the exact opposite. An HTML page could define default styles for its elements, which would be carried in the page, and overriden with an external stylesheet.</p>
<p>However, the actual rules dictate that I must edit the HTML file if I want to change the style of an element with an element style. In this not the exact opposite of the intention of CSS?</p>
<div class="article-cg-box">
  <h3>
You may like the Clojure Gazette
</h3>
  <p class="article-cg-box-text">
    
For more inspiration, history, interviews, and trends of interest to Clojure programmers, get the free Clojure Gazette.
</p>

<p><a href="http://www.clojuregazette.com/"
     class="article-cg-box-button js-clojuregazette">Learn More</a></p>

<p>
    
Clojure pulls in ideas from many different languages and paradigms, and also from the broader world, including music and philosophy. The Clojure Gazette shares that vision and weaves a rich tapestry of ideas from the daily flow of library releases to the deep historical roots of computer science.
</p>
</div>



<h3 id="you-might-also-like">You might also like</h3>
<ul>
<li><a href="http://www.lispcast.com/css-abstraction-combination">CSS has Weak Forms of Abstraction and Combination</a></li>
<li><a href="http://www.lispcast.com/less-abstraction-combination">LESS has Better Forms of Abstraction than CSS</a></li>
<li><a href="http://www.lispcast.com/pre-west-interview-priyatam-mudivarti">Pre-West Interview: Priyatam Mudivarti</a></li>
<li><a href="http://www.lispcast.com/pre-west-priyatam-mudivarti">Pre-West Prep: Priyatam Mudivarti</a></li>
</ul>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="/the-case-against-curly-quotes">
              The Case Against Curly Quotes
            </a>
          </h2>

          <div class="timestamp">
            November 05, 2012
          </div>

          
<p>A lot of web software converts ASCII single- and double-quote characters into special, non-ASCII open and close versions. These are sometimes referred to as &quot;<a href="http://en.wikipedia.org/wiki/Quotation_mark_glyphs">smart quotes</a>&quot;. Their less intelligent ASCII equivalents are &quot;dumb quotes&quot;. Smart quotes undoubtedly look better.</p>
<p>Here is an example.</p>
<p>&quot;Some text&quot; becomes “Some text”.</p>
<p>Very pretty, no? There is no smart quote key on your keyboard, so in order to make them, your software will convert them automagically. I say &quot;automagically&quot; because they are often converted incorrectly. There are no simple rules to convert them correctly.</p>
<p>I used to upgrade my dumb quotes to smart, but a couple of years ago I decided against it. Although I would like to have prettier quotes, they annoy me on other people's sites, even when they are correctly chosen.</p>
<p>Specifically, they <a href="http://stackoverflow.com/questions/1088506/smart-quotes-without-breaking-copy-and-paste">break copy-paste</a>. When you copy text with smart quotes (and smart apostrophes, smart dashes, and other smart characters), you get crap in your text. I like copy-paste and I do not want it broken on my site. In fact, I would love it if the world stopped using smart quotes.</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="https://google-styleguide.googlecode.com/svn/trunk/lispguide.xml">
              Google Common Lisp Style Guide
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/google-common-lisp-style-guide">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            October 11, 2012
          </div>

          
<p>In April 2011, Google acquired ITA Software. ITA provides airline flight search for several of the major companies. The interesting thing is that ITA's search engine was written in Common Lisp.</p>
<p>This style guide shows that Google is adopting the existing Lisp code base instead of rewriting it. Not so surprising since the code is, from what I have heard, well-engineered. But a bit surprising since Google chose Python over Lisp some time ago. Peter Norvig explains the choice a bit on <a href="http://www.youtube.com/watch?v=hE7k0_9k0VA#t=03m20s">Reddit</a> and <a href="http://news.ycombinator.com/item?id=1803815">Hacker News</a>.</p>
<p>In addition, it also shows that Google is affecting ITA with its culture, to some degree. Google uses this format for <a href="https://google-styleguide.googlecode.com/svn/trunk/">all of its style guides</a>.</p>
<p>Anyway, I love style guides!</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


        <article class="article">
          <h2 class="article-title-wrapper">
            <a class="article-title"
               href="https://oracleus.activeevents.com/connect/sessionDetail.ww?SESSION_ID=3242">
              Clojure/ClojureScript: One Language to Rule the Web
            </a>
            <a class="loguito"
               href="http://www.lispcast.com/clojure-clojurescript-one-language-to-rule-the-web">
              <img class="lambda-loguito"
                   src="/img/lambda.png" />
            </a>
          </h2>

          <div class="timestamp">
            October 11, 2012
          </div>

          
<p>Nice intro to Clojurescript.</p>


          <div class="endmark">
            <a class="endmark-link"
               href="/">
              <img class="endmark-lambda"
                   src="/img/lambda.png" />
            </a>
          </div>

        </article>


      <div class="notes">

      </div>

    </div>

    <footer class="footer-banner">
      <a class="footer-previous"
         href="page20.html">
        <i class="fa fa-chevron-left footer-arrow"></i>
      </a>
      <a class="footer-next"
         href="page18.html">
        <i class="fa fa-chevron-right footer-arrow"></i>
      </a>
    </footer>


    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script>

      document.write('<script src="https://oberon.herokuapp.com/cookie/get.js?_=' + (new Date()).getTime() + '"><\/script>');

          if(window.oberon && mixpanel) {
            if(document.cookie.indexOf('oberon-id') < 0) {
              var expires = (new Date((new Date().getTime() + 1000*60*60*24*365*10))).toUTCString();
              mixpanel.alias(window.oberon.id);
              document.cookie = "oberon-id=" + window.oberon.id + ";expires=" + expires + ";path=/";
            }
            mixpanel.identify(window.oberon.id);
          }

      mixpanel.register({URL: window.location.pathname,
                         Title: $("title").text()});

      mixpanel.track("Page Visit");

      mixpanel.track_forms('.gazette-form', 'Submit Clojure Gazette');
      mixpanel.track_forms('.subscribe-form', 'Subscribe');

      mixpanel.track_links('a.homepage-offer-box-link',
                           'Click PurelyFunctional.tv',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      mixpanel.track_links('a.js-clojuregazette',
                           'Click Clojure Gazette',
                           function(e) {
                             return {ToURL: $(e).prop('href')};
                           });

      $('input[name=EMAIL]').change(function() {
                                                      var i = $(this);
                                                      window.o_email = i.val();
                                                      });

      $('form').submit(function() {
        if(window.o_email)
          mixpanel.people.set({"$email": window.o_email});
});

    </script>

  </body>
</html>
